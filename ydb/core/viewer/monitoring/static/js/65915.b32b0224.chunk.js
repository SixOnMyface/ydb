"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[65915],{156:(e,t,n)=>{n.d(t,{k_:()=>f,QQ:()=>b,b0:()=>y,OH:()=>S,fj:()=>h,Ep:()=>N});var s=n(59284),o=n(24600),a=n(7435),r=n(16439),i=n(90182);const l=3,d=2,u=120,c=10,m=1,p=10;function h(){const[e,t]=s.useState(void 0),[n,o]=s.useState(void 0);return{handleDataFetched:s.useCallback((n=>{if(null!==n&&void 0!==n&&n.columnsSettings&&!e){const{maxSlotsPerDisk:e,maxDisksPerNode:s}=n.columnsSettings,a=e||m,r=s||m,i=Math.max(a*l+(a-1)*d,u),h=r*i+(r-1)*c+2*p;t(i),o(h)}}),[e]),columnsSettings:s.useMemo((()=>({pDiskWidth:e||u,pDiskContainerWidth:n})),[n,e])}}const g=(0,r.H)(["success","warning","danger"],1,2),v={"block-4-2":(0,r.H)(["success","warning","danger"],1,2),"mirror-3-dc":(0,r.H)(["success","warning","danger"],1,3)},f=e=>{var t;return(void 0!==(t=e.ErasureSpecies)&&t in v?v[e.ErasureSpecies]:g)(e.Degraded)};function S(e,t){var n;let s=!0;return(0,a.f8)(null===(n=e.VDiskId)||void 0===n?void 0:n.GroupID)&&null!==t&&void 0!==t&&t.groupId&&(s&&=String(e.VDiskId.GroupID)===t.groupId),(0,a.f8)(e.NodeId)&&null!==t&&void 0!==t&&t.nodeId&&(s&&=String(e.NodeId)===t.nodeId),(0,a.f8)(e.PDiskId)&&null!==t&&void 0!==t&&t.pDiskId&&(s&&=String(e.PDiskId)===t.pDiskId),(0,a.f8)(e.VDiskSlotId)&&null!==t&&void 0!==t&&t.vDiskSlotId&&(s&&=String(e.VDiskSlotId)===t.vDiskSlotId),s}const k=10;function y(e){return(0,a.f8)(null===e||void 0===e?void 0:e.nodeId)||(0,a.f8)(null===e||void 0===e?void 0:e.pDiskId)||(0,a.f8)(null===e||void 0===e?void 0:e.vDiskSlotId)?1:k}function b(e){return(0,a.f8)(null===e||void 0===e?void 0:e.groupId)||(0,a.f8)(null===e||void 0===e?void 0:e.vDiskSlotId)?1:k}function N(e=[],t){const n=(0,i.N4)(o.K);return s.useMemo((()=>{const s=[];return function(e){return"mirror-3-dc"===e||"mirror-3of4"===e}(t)?(e.forEach(((t,o)=>{var a,r,i;(null===n||void 0===n||null===(a=n.get(Number(null===t||void 0===t?void 0:t.NodeId)))||void 0===a?void 0:a.DC)!==(null===n||void 0===n||null===(r=n.get(Number(null===(i=e[o+1])||void 0===i?void 0:i.NodeId)))||void 0===r?void 0:r.DC)&&s.push(o)})),s):s}),[t,e,n])}},5707:(e,t,n)=>{n.d(t,{A$:()=>r,Km:()=>i,Yh:()=>l,aW:()=>a,iZ:()=>u,qs:()=>d});var s=n(94025),o=n(67375);const a={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5},r=Object.entries(a).reduce(((e,[t,n])=>({...e,[n]:t})),{}),i=a.Grey,l=r[i],d={[o.W.OK]:a.Green,[o.W.Initial]:a.Yellow,[o.W.SyncGuidRecovery]:a.Yellow,[o.W.LocalRecoveryError]:a.Red,[o.W.SyncGuidRecoveryError]:a.Red,[o.W.PDiskError]:a.Red},u={[s.t.Normal]:a.Green,[s.t.Initial]:a.Yellow,[s.t.InitialFormatRead]:a.Yellow,[s.t.InitialSysLogRead]:a.Yellow,[s.t.InitialCommonLogRead]:a.Yellow,[s.t.InitialFormatReadError]:a.Red,[s.t.InitialSysLogReadError]:a.Red,[s.t.InitialSysLogParseError]:a.Red,[s.t.InitialCommonLogReadError]:a.Red,[s.t.InitialCommonLogParseError]:a.Red,[s.t.CommonLoggerInitError]:a.Red,[s.t.OpenFileError]:a.Red,[s.t.ChunkQuotaError]:a.Red,[s.t.DeviceIoError]:a.Red,[s.t.Stopped]:a.Red}},7187:(e,t,n)=>{n.d(t,{H7:()=>c,NJ:()=>i,SW:()=>d,XY:()=>u,gh:()=>p,r$:()=>m});var s=n(7435),o=n(54090),a=n(16439),r=n(5707);function i(e){return"VDiskId"in e}const l=(0,a.H)([o.m.Green,o.m.Yellow,o.m.Red]),d=e=>(0,s.f8)(e)?c(l(e)):0;function u(e){return void 0===e?r.Yh:r.A$[e]||r.Yh}function c(e){return e?r.aW[e]:0}function m({nodeId:e,pDiskId:t}){if((0,s.f8)(e)&&(0,s.f8)(t))return`${e}-${t}`}function p(e,t,n){return[e,t,n].join("-")}},8809:(e,t,n)=>{n.d(t,{y:()=>j});var s=n(77506),o=n(88226),a=n(13096),r=n(44294),i=n(59284),l=n(87184),d=n(47665),u=n(24600),c=n(54090),m=n(7435),p=n(76086),h=n(31684),g=n(7187),v=n(90182),f=n(12888),S=n(41650),k=n(60073),y=n(25196),b=n(96927),N=n(92459);function D(e){let t;return(0,m.f8)(e.VDiskSlotId)&&(0,m.f8)(e.PDiskId)&&(0,m.f8)(e.NodeId)?t=(0,N.yX)({vDiskSlotId:e.VDiskSlotId,pDiskId:e.PDiskId,nodeId:e.NodeId}):(0,m.f8)(e.StringifiedId)&&(t=(0,N.yX)({vDiskId:e.StringifiedId,pDiskId:e.PDiskId,nodeId:e.NodeId})),t}var x=n(39110),w=n(60712);const I=(0,s.cn)("vdisk-storage-popup"),C=({data:e})=>{const t=(0,g.NJ)(e),n=(0,f.X)(),s=i.useMemo((()=>t?((e,t)=>{var n,s,o,a;const{NodeId:r,PDiskId:i,VDiskSlotId:d,StringifiedId:u,VDiskState:p,SatisfactionRank:g,DiskSpace:v,FrontQueues:f,Replicated:k,UnsyncedVDisks:b,AllocatedSize:N,ReadThroughput:I,WriteThroughput:C,StoragePoolName:P}=e,j=[{label:"VDisk",value:u},{label:"State",value:null!==p&&void 0!==p?p:"not available"}];var E,A;if(P&&j.push({label:"StoragePool",value:P}),g&&(null===(n=g.FreshRank)||void 0===n?void 0:n.Flag)!==c.m.Green&&j.push({label:"Fresh",value:null===(E=g.FreshRank)||void 0===E?void 0:E.Flag}),g&&(null===(s=g.LevelRank)||void 0===s?void 0:s.Flag)!==c.m.Green&&j.push({label:"Level",value:null===(A=g.LevelRank)||void 0===A?void 0:A.Flag}),g&&null!==(o=g.FreshRank)&&void 0!==o&&o.RankPercent&&j.push({label:"Fresh",value:g.FreshRank.RankPercent}),g&&null!==(a=g.LevelRank)&&void 0!==a&&a.RankPercent&&j.push({label:"Level",value:g.LevelRank.RankPercent}),v&&v!==c.m.Green&&j.push({label:"Space",value:v}),f&&f!==c.m.Green&&j.push({label:"FrontQueues",value:f}),!1===k&&j.push({label:"Replicated",value:"NO"}),b&&j.push({label:"UnsyncVDisks",value:b}),Number(N)&&j.push({label:"Allocated",value:(0,S.wb)(N)}),Number(I)&&j.push({label:"Read",value:(0,S.O4)(I)}),Number(C)&&j.push({label:"Write",value:(0,S.O4)(C)}),t&&(0,m.f8)(r)&&(0,m.f8)(i)&&((0,m.f8)(d)||(0,m.f8)(u))){const e=(0,m.f8)(d)?(0,h.Wg)({nodeId:r,pDiskId:i,vDiskSlotId:d}):void 0,t=D({VDiskSlotId:d,PDiskId:i,NodeId:r,StringifiedId:u});t&&j.push({label:"Links",value:(0,w.jsxs)(l.s,{wrap:"wrap",gap:2,children:[(0,w.jsx)(y.K,{title:(0,x.r)("vdisk-page"),url:t,external:!1},t),e?(0,w.jsx)(y.K,{title:(0,x.r)("developer-ui"),url:e}):null]})})}return j})(e,n):((e,t)=>{const{NodeId:n,PDiskId:s,VSlotId:o,StoragePoolName:a}=e,r=[{label:"State",value:"not available"}];if(a&&r.push({label:"StoragePool",value:a}),r.push({label:"NodeId",value:null!==n&&void 0!==n?n:p.Pd},{label:"PDiskId",value:null!==s&&void 0!==s?s:p.Pd},{label:"VSlotId",value:null!==o&&void 0!==o?o:p.Pd}),t&&(0,m.f8)(n)&&(0,m.f8)(s)&&(0,m.f8)(o)){const e=(0,h.Wg)({nodeId:n,pDiskId:s,vDiskSlotId:o});r.push({label:"Links",value:(0,w.jsx)(y.K,{title:"Developer UI",url:e})})}return r})(e,n)),[e,t,n]),o=(0,v.N4)(u.K),a=(0,m.f8)(e.NodeId)?null===o||void 0===o?void 0:o.get(e.NodeId):void 0,N=i.useMemo((()=>t&&e.PDisk&&(0,b.f)(e.PDisk,a,n)),[e,a,t,n]),C=[];if("Donors"in e&&e.Donors){const t=e.Donors;for(const e of t)C.push({label:"VDisk",value:(0,w.jsx)(r.E,{to:D(e),children:e.StringifiedId})})}return(0,w.jsxs)("div",{className:I(),children:[e.DonorMode&&(0,w.jsx)(d.J,{className:I("donor-label"),children:"Donor"}),(0,w.jsx)(k.z_,{title:"VDisk",info:s,size:"s"}),N&&(0,w.jsx)(k.z_,{title:"PDisk",info:N,size:"s"}),C.length>0&&(0,w.jsx)(k.z_,{title:"Donors",info:C,size:"s"})]})},P=(0,s.cn)("ydb-vdisk-component"),j=({data:e={},compact:t,inactive:n,showPopup:s,onShowPopup:i,onHidePopup:l,progressBarClassName:d,delayClose:u,delayOpen:c})=>{const m=D(e);return(0,w.jsx)(a.P,{showPopup:s,onShowPopup:i,onHidePopup:l,renderPopupContent:()=>(0,w.jsx)(C,{data:e}),offset:[0,5],delayClose:u,delayOpen:c,children:(0,w.jsx)("div",{className:P(),children:(0,w.jsx)(r.E,{to:m,className:P("content"),children:(0,w.jsx)(o.V,{diskAllocatedPercent:e.AllocatedPercent,severity:e.Severity,compact:t,inactive:n,className:d})})})})}},10174:(e,t,n)=>{n.d(t,{S:()=>r});var s=n(21334),o=n(16029),a=n(11905);const r=s.F.injectEndpoints({endpoints:e=>({getStorageNodesInfo:e.query({queryFn:async(e,{signal:t})=>{try{const n=await window.api.viewer.getNodes({storage:!0,type:"static",...e},{signal:t});return{data:(0,a.rz)(n)}}catch(n){return{error:n}}},providesTags:["All","StorageData"]}),getStorageGroupsInfo:e.query({queryFn:async(e,{signal:t})=>{try{return{data:await(0,o.t)(e,{signal:t})}}catch(n){return{error:n}}},providesTags:["All","StorageData"]})}),overrideExisting:"throw"})},10576:(e,t,n)=>{n.d(t,{E:()=>g});var s=n(59284),o=n(88226),a=n(13096),r=n(44294),i=n(96927),l=n(8809),d=n(92459),u=n(7435),c=n(77506),m=n(156),p=n(60712);const h=(0,c.cn)("pdisk-storage"),g=({data:e={},vDisks:t,showPopup:n,onShowPopup:c,onHidePopup:g,className:v,progressBarClassName:f,viewContext:S,width:k})=>{const{NodeId:y,PDiskId:b}=e,N=(0,u.f8)(y)&&(0,u.f8)(b),D=s.useRef(null);let x;return N&&(x=(0,d.Ck)(b,y)),(0,p.jsxs)("div",{className:h(null,v),ref:D,style:{width:k},children:[null!==t&&void 0!==t&&t.length?(0,p.jsx)("div",{className:h("vdisks"),children:t.map((e=>(0,p.jsx)("div",{className:h("vdisks-item"),style:{flexGrow:Number(e.AllocatedSize)||1},children:(0,p.jsx)(l.y,{data:e,inactive:!(0,m.OH)(e,S),compact:!0,delayClose:200,delayOpen:200})},e.StringifiedId)))}):null,(0,p.jsx)(a.P,{showPopup:n,offset:[0,5],anchorRef:D,onShowPopup:c,onHidePopup:g,renderPopupContent:()=>(0,p.jsx)(i.O,{data:e}),delayClose:200,children:(0,p.jsxs)(r.E,{to:x,className:h("content"),children:[(0,p.jsx)(o.V,{diskAllocatedPercent:e.AllocatedPercent,severity:e.Severity,className:f}),(0,p.jsx)("div",{className:h("media-type"),children:e.Type})]})})]})}},10662:(e,t,n)=>{n.d(t,{i:()=>r});var s=n(28664),o=n(59284);var a=n(60712);const r=({onUpdate:e,value:t="",debounce:n=200,...r})=>{const[i,l]=function({value:e,onUpdate:t,debounce:n=200}){const[s,a]=o.useState(e),r=o.useRef();return o.useEffect((()=>{a((t=>t!==e?e:t))}),[e]),[s,e=>{a(e),window.clearTimeout(r.current),r.current=window.setTimeout((()=>{null===t||void 0===t||t(e)}),n)}]}({value:t,onUpdate:e,debounce:n});return(0,a.jsx)(s.k,{value:i,onUpdate:l,...r})}},10731:(e,t,n)=>{n.d(t,{U:()=>c});var s=n(84476),o=n(7889),a=n(78524),r=n(48372);const i=JSON.parse('{"default_message":"Everything is fine!","default_button_label":"Show All"}'),l=JSON.parse('{"default_message":"\u0412\u0441\u0451 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!","default_button_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}'),d=(0,r.g4)("ydb-storage-empty-filter",{ru:l,en:i});var u=n(60712);const c=({title:e,message:t=d("default_message"),showAll:n=d("default_button_label"),onShowAll:r,image:i=(0,u.jsx)(a.v,{name:"thumbsUp"})})=>(0,u.jsx)(o.p,{image:i,position:"left",title:e,description:t,actions:r&&[(0,u.jsx)(s.$,{onClick:r,children:n},"show-all")]})},11905:(e,t,n)=>{n.d(t,{Rv:()=>y,rz:()=>S,Qi:()=>k});var s=n(94025),o=n(67375),a=n(7187),r=n(27295),i=n(78034);var l=n(73891),d=n(56839),u=n(51930),c=n(64036),m=n(78461);function p(e={}){var t,n,s,o;const{Whiteboard:i={},PDisk:l,...h}=e,g={...i,...h,VDiskId:i.VDiskId},v=function(e={}){var t,n,s;const{Whiteboard:o,...i}=e,l={...o,...i,PDiskId:null===o||void 0===o?void 0:o.PDiskId};if(void 0===l.PDiskId&&i.PDiskId){const e=Number(i.PDiskId.split("-")[1]);isNaN(e)||(l.PDiskId=e)}const d=i.PDiskId||(0,a.r$)({nodeId:l.NodeId,pDiskId:l.PDiskId}),{AllocatedPercent:c,AllocatedSize:p,AvailableSize:h,TotalSize:g}=(0,r.hK)({AvailableSize:l.AvailableSize,TotalSize:l.TotalSize}),v=null!==(t=null===(n=i.Type)||void 0===n?void 0:n.toUpperCase())&&void 0!==t?t:(0,m.Y)(null===o||void 0===o?void 0:o.Category),f=(0,u.d)({State:null===o||void 0===o?void 0:o.State,AllocatedPercent:c}),S=null!==(s=i.SlotSize)&&void 0!==s?s:null===o||void 0===o?void 0:o.EnforcedDynamicSlotSize;return{...l,StringifiedId:d,AllocatedPercent:c,AllocatedSize:p,AvailableSize:h,TotalSize:g,Type:v,Severity:f,SlotSize:S}}({...l,NodeId:g.NodeId}),f=null!==(t=null===v||void 0===v?void 0:v.PDiskId)&&void 0!==t?t:null===i||void 0===i?void 0:i.PDiskId,S=null!==(n=h.VDiskId)&&void 0!==n?n:(0,d.U9)(i.VDiskId),k=(0,c.b)(g),y=(0,r.LW)({AvailableSize:null!==(s=g.AvailableSize)&&void 0!==s?s:null===l||void 0===l?void 0:l.AvailableSize,AllocatedSize:g.AllocatedSize}),b=null===(o=h.Donors)||void 0===o?void 0:o.map((e=>p({...e,Whiteboard:{...e.Whiteboard,DonorMode:!0}})));return{...g,...y,PDisk:v,Donors:b,PDiskId:f,StringifiedId:S,Severity:k}}function h(e){const{DiskSpace:t,VDisks:n=[]}=e;return t||(0,a.XY)(Math.max(...n.map((e=>(0,a.H7)(e.DiskSpace)))))}const g=(e,t)=>{var n;const s=(0,r.WT)(e);return{...s,StoragePoolName:t,Donors:null===s||void 0===s||null===(n=s.Donors)||void 0===n?void 0:n.map((e=>({...e,StoragePoolName:t})))}},v=(e,t)=>{var n;let a,i=0,l=0,d=0,u=0,c=0;const{Name:m,MediaType:p}=t;if(e.VDisks)for(const h of e.VDisks){const{Replicated:e,VDiskState:t,AvailableSize:n,AllocatedSize:m,PDisk:p,ReadThroughput:g,WriteThroughput:v}=h,{Type:f,State:S,AvailableSize:k}=(0,r.or)(p);!1!==e&&S===s.t.Normal&&t===o.W.OK||(i+=1);const y=Number(null!==n&&void 0!==n?n:k)||0,b=Number(m)||0;l+=b,d+=y+b,u+=Number(g)||0,c+=Number(v)||0,a=!f||f!==a&&a?"Mixed":f}const v=null===(n=e.VDisks)||void 0===n?void 0:n.map((e=>g(e,m))),f=d?((e,t=1)=>{const n=e.Limit?100*e.Used/e.Limit:0;return Math.floor(n/t)*t})({Used:l,Limit:d},5):void 0,S=h(e);return{...e,GroupGeneration:e.GroupGeneration?String(e.GroupGeneration):void 0,GroupId:e.GroupID,Overall:e.Overall,VDisks:v,Usage:f,Read:u,Write:c,PoolName:m,Used:l,Limit:d,Degraded:i,MediaType:p||a||void 0,DiskSpace:S}},f=e=>{const{VDisks:t=[],PoolName:n,Usage:s=0,Read:o=0,Write:a=0,Used:r=0,Limit:i=0,Degraded:l=0,Kind:d,MediaType:u,GroupID:c,Overall:m,GroupGeneration:p}=e,v=t.map((e=>g(e,n))),f=100*Number(s),S=h(e);return{...e,PoolName:n,GroupId:c,MediaType:u||d,VDisks:v,Usage:f,Overall:m,GroupGeneration:p?String(p):void 0,Read:Number(o),Write:Number(a),Used:Number(r),Limit:Number(i),Degraded:Number(l),DiskSpace:S}},S=e=>{const{Nodes:t,TotalNodes:n,FoundNodes:o,NodeGroups:a,MaximumSlotsPerDisk:l,MaximumDisksPerNode:d}=e,u=null===a||void 0===a?void 0:a.map((({GroupName:e,NodeCount:t})=>{if(e&&t)return{name:e,count:Number(t)}})).filter((e=>Boolean(e))),c=((e,t)=>{if(t&&!isNaN(Number(t)))return Number(t);const n=(e||[]).flatMap((e=>{const t=e.PDisks||[],n=e.VDisks||[];return t.map((e=>n.filter((t=>t.PDiskId===e.PDiskId)).length||0))}));return Math.max(1,...n)})(t,l),m=((e,t)=>{if(t&&!isNaN(Number(t)))return Number(t);const n=(e||[]).map((e=>{var t;return(null===(t=e.PDisks)||void 0===t?void 0:t.length)||0}));return Math.max(1,...n)})(t,d),p=null===t||void 0===t?void 0:t.map((e=>((e,t,n)=>{var o,a,l;const d=(null===(o=e.PDisks)||void 0===o?void 0:o.filter((e=>e.State!==s.t.Normal)).length)||0,u=null===(a=e.PDisks)||void 0===a?void 0:a.map((t=>({...(0,r.or)(t),NodeId:e.NodeId}))),c=null===(l=e.VDisks)||void 0===l?void 0:l.map((t=>({...(0,r.WT)(t),NodeId:e.NodeId})));return{...(0,i.q1)(e.SystemState),NodeId:e.NodeId,DiskSpaceUsage:e.DiskSpaceUsage,PDisks:u,VDisks:c,Missing:d,MaximumSlotsPerDisk:t,MaximumDisksPerNode:n}})(e,c,m)));return{nodes:p,total:Number(n)||(null===p||void 0===p?void 0:p.length),found:Number(o),tableGroups:u,columnsSettings:{maxSlotsPerDisk:c,maxDisksPerNode:m}}},k=e=>{const{StoragePools:t,StorageGroups:n,TotalGroups:s,FoundGroups:o}=e,a=((e,t)=>{let n=[];return e?n=e.map(f):null===t||void 0===t||t.forEach((e=>{var t;null===(t=e.Groups)||void 0===t||t.forEach((t=>{n.push(v(t,e))}))})),n})(n,t);return{groups:a,total:Number(s)||a.length,found:Number(o)}};function y(e){const{FoundGroups:t,TotalGroups:n,StorageGroups:s=[],StorageGroupGroups:o}=e,a=s.map((e=>{const{Usage:t,DiskSpaceUsage:n,Read:s,Write:o,Used:a,Limit:r,MissingDisks:i,VDisks:d=[],Overall:u,LatencyPutTabletLog:c,LatencyPutUserData:m,LatencyGetFast:g}=e,v=d.map(p),f=h(e);return{...e,Usage:t,DiskSpaceUsage:n,Read:Number(s),Write:Number(o),Used:Number(a),Limit:Number(r),LatencyPutTabletLogMs:(0,l.Jc)(c),LatencyPutUserDataMs:(0,l.Jc)(m),LatencyGetFastMs:(0,l.Jc)(g),Degraded:Number(i),Overall:u,VDisks:v,DiskSpace:f}})),r=null===o||void 0===o?void 0:o.map((({GroupName:e,GroupCount:t})=>{if(e&&t)return{name:e,count:Number(t)}})).filter((e=>Boolean(e)));return{groups:a,total:Number(n)||a.length,found:Number(t),tableGroups:r}}},13096:(e,t,n)=>{n.d(t,{P:()=>u});var s=n(59284),o=n(39238),a=n(43781),r=n.n(a),i=n(77506),l=n(60712);const d=(0,i.cn)("hover-popup"),u=({children:e,renderPopupContent:t,showPopup:n,offset:a,anchorRef:i,onShowPopup:u,onHidePopup:c,placement:m=["top","bottom"],contentClassName:p,delayClose:h=100,delayOpen:g=100})=>{const[v,f]=s.useState(!1),S=s.useRef(null),k=s.useMemo((()=>r()((()=>{f(!0),null===u||void 0===u||u()}),g)),[u,g]),y=s.useCallback((()=>{f(!1),null===c||void 0===c||c()}),[c]),b=s.useMemo((()=>r()(y,h)),[y,h]),N=k,[D,x]=s.useState(!1),[w,I]=s.useState(!1),C=s.useCallback((()=>{x(!0)}),[]),P=s.useCallback((()=>{x(!1)}),[]),j=s.useCallback((()=>{I(!0)}),[]),E=s.useCallback((()=>{I(!1)}),[]),A=s.useCallback((()=>{I(!1),x(!1),y()}),[y]),T=v||n||D||w;return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("span",{ref:S,onMouseEnter:N,onMouseLeave:()=>{k.cancel(),b()},children:e}),T?(0,l.jsx)(o.z,{contentClassName:d(null,p),anchorRef:i||S,onMouseEnter:C,onMouseLeave:P,onEscapeKeyDown:A,onBlur:E,placement:m,hasArrow:!0,open:!0,offset:a||[0,12],children:(0,l.jsx)("div",{onContextMenu:j,children:t()})}):null]})}},15132:(e,t,n)=>{n.d(t,{O:()=>m});var s=n(38501),o=n(77506),a=n(56839),r=n(35736),i=n(41650),l=n(60712);const d=(0,o.cn)("progress-viewer"),u=e=>(0,a.ZV)((0,a.CR)(Number(e),2)),c=(e,t)=>[u(e),u(t)];function m({value:e,capacity:t,formatValues:n=c,percents:o,className:a,size:u="xs",colorizeProgress:m,inverseColorize:p,warningThreshold:h,dangerThreshold:g,hideCapacity:v}){const f=(0,s.D)();let S=Math.floor(parseFloat(String(e))/parseFloat(String(t))*100)||0;S=S>100?100:S;let k=e,y=t,b="/";o?(k=S+"%",y="",b=""):n&&([k,y]=n(Number(e),Number(t)));const N=(0,r.w)({fillWidth:S,warningThreshold:h,dangerThreshold:g,colorizeProgress:m,inverseColorize:p});m&&!(0,i.kf)(t)&&(S=100);const D={width:S+"%"};return(0,i.kf)(e)?(0,l.jsxs)("div",{className:d({size:u,theme:f,status:N},a),children:[(0,l.jsx)("div",{className:d("line"),style:D}),(0,l.jsx)("span",{className:d("text"),children:(0,i.kf)(t)&&!v?`${k} ${b} ${y}`:k})]}):(0,l.jsx)("div",{className:`${d({size:u})} ${a} error`,children:"no data"})}},16029:(e,t,n)=>{n.d(t,{t:()=>o});var s=n(11905);async function o({version:e="v2",shouldUseGroupsHandler:t,...n},o){if(t&&"v1"!==e){const e=await window.api.storage.getStorageGroups({...n},o);return(0,s.Rv)(e)}{const t=await window.api.viewer.getStorageInfo({version:e,...n},o);return(0,s.Qi)(t)}}},19228:(e,t,n)=>{n.d(t,{Q:()=>l});var s=n(89169),o=n(77506),a=n(66781),r=n(60712);const i=(0,o.cn)("table-skeleton"),l=({rows:e=2,delay:t=600,className:n})=>{const[o]=(0,a.y)(t);return(0,r.jsxs)("div",{className:i("wrapper",{hidden:!o},n),children:[(0,r.jsxs)("div",{className:i("row"),children:[(0,r.jsx)(s.E,{className:i("col-1")}),(0,r.jsx)(s.E,{className:i("col-2")}),(0,r.jsx)(s.E,{className:i("col-3")}),(0,r.jsx)(s.E,{className:i("col-4")}),(0,r.jsx)(s.E,{className:i("col-5")})]}),[...new Array(e)].map(((e,t)=>(0,r.jsx)("div",{className:i("row"),children:(0,r.jsx)(s.E,{className:i("col-full")})},`skeleton-row-${t}`)))]})}},24543:(e,t,n)=>{n.d(t,{u:()=>r});var s=n(59284),o=n(39238),a=n(60712);const r=({children:e,content:t,className:n,pinOnClick:r,hasArrow:i=!0,placement:l=["top","bottom"],...d})=>{const[u,c]=s.useState(!1),[m,p]=s.useState(!1),h=s.useRef(null);return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(o.z,{anchorRef:h,open:m||u,placement:l,hasArrow:i,onOutsideClick:()=>{p(!1)},...d,children:t}),(0,a.jsx)("span",{className:n,ref:h,onClick:r?()=>{p(!0)}:void 0,onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},children:e})]})}},27295:(e,t,n)=>{n.d(t,{LW:()=>u,WT:()=>l,hK:()=>c,or:()=>d});var s=n(56839),o=n(51930),a=n(64036),r=n(78461),i=n(7187);function l(e={}){var t;if(!(0,i.NJ)(e)){const{NodeId:t,PDiskId:n,VSlotId:o}=e;return{StringifiedId:(0,s.U9)({NodeId:t,PDiskId:n,VSlotId:o}),NodeId:t,PDiskId:n,VDiskSlotId:o}}const{PDisk:n,PDiskId:o,VDiskId:r,NodeId:c,Donors:m,AvailableSize:p,AllocatedSize:h,...g}=e,v=n?d({...n,NodeId:null!==(t=null===n||void 0===n?void 0:n.NodeId)&&void 0!==t?t:c}):void 0,f=null!==o&&void 0!==o?o:null===v||void 0===v?void 0:v.PDiskId,S=u({AvailableSize:null!==p&&void 0!==p?p:null===n||void 0===n?void 0:n.AvailableSize,AllocatedSize:h}),k=(0,a.b)(e),y=(0,s.U9)(r);return{...g,...S,VDiskId:r,NodeId:c,PDiskId:f,PDisk:v,Donors:null===m||void 0===m?void 0:m.map((e=>l({...e,DonorMode:!0}))),Severity:k,StringifiedId:y}}function d(e={}){const{AvailableSize:t,TotalSize:n,Category:s,State:a,PDiskId:l,NodeId:d,EnforcedDynamicSlotSize:u,...m}=e,p=(0,i.r$)({nodeId:d,pDiskId:l}),h=(0,r.Y)(s),g=c({AvailableSize:t,TotalSize:n}),v=(0,o.d)({State:a,AllocatedPercent:g.AllocatedPercent});return{...m,...g,PDiskId:l,NodeId:d,StringifiedId:p,Type:h,Category:s,State:a,Severity:v,SlotSize:u}}function u({AvailableSize:e,AllocatedSize:t}){const n=Number(e),s=Number(t),o=s+n;return{AvailableSize:n,AllocatedSize:s,TotalSize:o,AllocatedPercent:Math.floor(100*s/o)}}function c({AvailableSize:e,TotalSize:t}){const n=Number(e),s=Number(t),o=s-n;return{AvailableSize:n,TotalSize:s,AllocatedSize:o,AllocatedPercent:Math.floor(100*o/s)}}},31911:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(48372);const o=JSON.parse('{"node-id":"Node ID","host":"Host","database":"Database","node-name":"Node Name","dc":"DC","rack":"Rack","version":"Version","uptime":"Uptime","memory":"Detailed Memory","ram":"RAM","cpu":"CPU","pools":"Pools","disk-usage":"Disk Usage","tablets":"Tablets","load-average":"Load Average","load":"Load","sessions":"Sessions","missing":"Missing","pdisks":"PDisks","field_memory-used":"Memory used","field_memory-limit":"Memory limit","system-state":"System State","connect-status":"Connect Status","utilization":"Utilization","network-utilization":"Network Utilization","connections":"Connections","clock-skew":"Clock Skew","skew":"Skew","ping-time":"Ping Time","ping":"Ping","send":"Send","receive":"Receive","max":"Max","min":"Min","avg":"Avg","sum":"Sum"}'),a=(0,s.g4)("ydb-nodes-columns",{en:o})},35736:(e,t,n)=>{n.d(t,{w:()=>o});var s=n(76086);function o({inverseColorize:e,warningThreshold:t=s.Hh,dangerThreshold:n=s.Ed,colorizeProgress:o,fillWidth:a}){let r=e?"danger":"good";return o&&(a>t&&a<=n?r="warning":a>n&&(r=e?"good":"danger")),r}},39110:(e,t,n)=>{n.d(t,{r:()=>a});var s=n(48372);const o=JSON.parse('{"slot-id":"VDisk Slot Id","pool-name":"Storage Pool Name","kind":"Kind","guid":"GUID","incarnation-guid":"Incarnation GUID","instance-guid":"Instance GUID","replication-status":"Replicated","state-status":"VDisk State","space-status":"Disk Space","fresh-rank-satisfaction":"Fresh Rank Satisfaction","level-rank-satisfaction":"Level Rank Satisfaction","front-queues":"Front Queues","has-unreadable-blobs":"Has Unreadable Blobs","size":"Size","read-throughput":"Read Throughput","write-throughput":"Write Throughput","links":"Links","vdisk-page":"VDisk page","developer-ui":"Developer UI","yes":"Yes","no":"No","vdiks-title":"VDisk"}'),a=(0,s.g4)("ydb-vDisk-info",{en:o})},40427:(e,t,n)=>{n.d(t,{U3:()=>o,k5:()=>R});const s=!0,o=41;var a=n(59284),r=n(49554);const i=n(21334).F.injectEndpoints({endpoints:function(e){return{fetchTableChunk:e.query({queryFn:async({offset:e,limit:t,sortParams:n,filters:s,columnsIds:o,fetchData:a},{signal:r})=>{try{return{data:await a({limit:t,offset:e,filters:s,sortParams:n,columnsIds:o,signal:r})}}catch(i){return{error:i}}},providesTags:["All"]})}}});var l=n(7435),d=n(90182),u=n(44508),c=n(89169);const m=(0,n(77506).cn)("ydb-paginated-table");function p(e){let t,n=null;return function(...s){t=s,"number"!==typeof n&&(n=requestAnimationFrame((()=>{e(...t),n=null})))}}const h=a.memo;var g=n(60712);const v=({children:e,className:t,height:n,width:s,align:o="left",resizeable:a})=>(0,g.jsx)("td",{className:m("row-cell",{align:o},t),style:{height:`${n}px`,width:`${s}px`,maxWidth:a?`${s}px`:void 0},children:e}),f=h((function({columns:e,height:t}){return(0,g.jsx)("tr",{className:m("row",{loading:!0}),children:e.map((e=>{var n;const o=null!==(n=e.resizeable)&&void 0!==n?n:s;return(0,g.jsx)(v,{height:t,width:e.width,align:e.align,className:e.className,resizeable:o,children:(0,g.jsx)(c.E,{className:m("row-skeleton"),style:{width:"80%",height:"50%"}})},e.name)}))})})),S=({row:e,columns:t,getRowClassName:n,height:o})=>{const a=null===n||void 0===n?void 0:n(e);return(0,g.jsx)("tr",{className:m("row",a),children:t.map((t=>{var n;const a=null!==(n=t.resizeable)&&void 0!==n?n:s;return(0,g.jsx)(v,{height:o,width:t.width,align:t.align,className:t.className,resizeable:a,children:t.render({row:e})},t.name)}))})},k=({columns:e,children:t})=>(0,g.jsx)("tr",{className:m("row",{empty:!0}),children:(0,g.jsx)("td",{colSpan:e.length,className:m("td"),children:t})});var y=n(48372);const b=JSON.parse('{"empty":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}'),N=(0,y.g4)("ydb-paginated-table",{ru:b,en:{empty:"No data"}}),D=h((function({id:e,chunkSize:t,calculatedCount:n,rowHeight:s,columns:o,fetchData:r,tableName:c,filters:m,sortParams:p,getRowClassName:h,renderErrorMessage:v,renderEmptyDataMessage:y,onDataFetched:b,isActive:D,keepCache:x}){var w;const[I,C]=a.useState(!0),[P]=(0,d.Nt)(),j={offset:e*t,limit:t,fetchData:r,filters:m,sortParams:p,columnsIds:o.map((e=>e.name)),tableName:c};i.useFetchTableChunkQuery(j,{skip:I||!D,pollingInterval:P,refetchOnMountOrArgChange:!x});const{currentData:E,error:A}=i.endpoints.fetchTableChunk.useQueryState(j);a.useEffect((()=>{let e=0;return D&&I&&(e=window.setTimeout((()=>{C(!1)}),200)),()=>{window.clearTimeout(e)}}),[D,I]),a.useEffect((()=>{E&&D&&b({...E,data:E.data,found:E.found||0,total:E.total||0})}),[E,D,b]);const T=(null===E||void 0===E||null===(w=E.data)||void 0===w?void 0:w.length)||n;return(0,g.jsx)("tbody",{id:e.toString(),style:{height:T*s+"px",display:D?"table-row-group":"block"},children:(()=>{var e;if(!D)return null;if(!E){if(A){const e=A;return(0,g.jsx)(k,{columns:o,children:v?v(e):(0,g.jsx)(u.o,{error:e})})}return(0,l._e)(T).map((e=>(0,g.jsx)(f,{columns:o,height:s},e)))}return null!==(e=E.data)&&void 0!==e&&e.length?E.data.map(((e,t)=>(0,g.jsx)(S,{row:e,columns:o,height:s,getRowClassName:h},t))):(0,g.jsx)(k,{columns:o,children:y?y():N("empty")})})()})}));var x=n(98934);function w({minWidth:e,maxWidth:t,getCurrentColumnWidth:n,onResize:s}){const o=a.useRef(null),[r,i]=a.useState(!1);return a.useEffect((()=>{const a=o.current;if(!a)return;let r,l,d;const u=p((n=>{if(I(n),"number"!==typeof r||"number"!==typeof l)return;const o=n.clientX-r,a=function(e,t=40,n=1/0){return Math.max(t,Math.min(e,n))}(l+o,e,t);a!==d&&(d=a,null===s||void 0===s||s(d))})),c=e=>{I(e),void 0!==d&&(null===s||void 0===s||s(d)),i(!1),r=void 0,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)},m=e=>{l=n(),I(e),r=e.clientX,i(!0),document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)};return a.addEventListener("mousedown",m),()=>{a.removeEventListener("mousedown",m),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)}}),[s,e,t,n]),(0,g.jsx)("span",{ref:o,className:m("resize-handler",{resizing:r}),onClick:e=>I(e)})}function I(e){e.preventDefault(),e.stopPropagation()}const C=({order:e})=>(0,g.jsx)("svg",{className:m("sort-icon",{desc:-1===e}),viewBox:"0 0 10 6",width:"10",height:"6",children:(0,g.jsx)("path",{fill:"currentColor",d:"M0 5h10l-5 -5z"})}),P=({sortOrder:e,sortable:t,defaultSortOrder:n})=>t?(0,g.jsx)("span",{className:m("sort-icon-container",{shadow:!e}),children:(0,g.jsx)(C,{order:e||n})}):null,j={left:"right",right:"left",center:"right"},E=({column:e,resizeable:t,sortOrder:n,defaultSortOrder:s,onSort:o,rowHeight:r,onCellMount:i,onCellUnMount:l,onColumnsResize:d})=>{var u;const c=a.useRef(null);a.useEffect((()=>{const e=c.current;return e&&(null===i||void 0===i||i(e)),()=>{e&&(null===l||void 0===l||l(e))}}),[i,l]);const p=a.useCallback((()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect().width}),[]),h=a.useCallback((t=>{null===d||void 0===d||d(e.name,t)}),[d,e.name]),v=null!==(u=e.header)&&void 0!==u?u:e.name,f={height:`${r}px`,width:`${e.width}px`,minWidth:t?`${e.width}px`:void 0,maxWidth:t?`${e.width}px`:void 0};return(0,g.jsxs)("th",{ref:c,className:m("head-cell-wrapper"),style:f,children:[(0,g.jsxs)("div",{className:m("head-cell",{align:e.align,sortable:e.sortable},e.className),onClick:()=>{e.sortable&&(null===o||void 0===o||o(e.name))},children:[(0,g.jsxs)("div",{className:m("head-cell-content-container"),children:[(0,g.jsx)("div",{className:m("head-cell-content"),children:v}),e.note&&(0,g.jsx)(x.H,{placement:j[e.align],className:m("head-cell-note"),children:e.note})]}),(0,g.jsx)(P,{sortOrder:n,sortable:e.sortable,defaultSortOrder:s})]}),t?(0,g.jsx)(w,{maxWidth:e.resizeMaxWidth,minWidth:e.resizeMinWidth,getCurrentColumnWidth:p,onResize:h}):null]})},A=({columns:e,onSort:t,onColumnsResize:n,defaultSortOrder:r=-1,rowHeight:i=o})=>{const[l,d]=a.useState({}),u=e=>{let n={};if(e===l.columnId){if(l.sortOrder&&l.sortOrder!==r)return d(n),void(null===t||void 0===t||t(n));n={sortOrder:1===l.sortOrder?-1:1,columnId:e}}else n={sortOrder:r,columnId:e};null===t||void 0===t||t(n),d(n)};return(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)("colgroup",{children:e.map((e=>(0,g.jsx)("col",{style:{width:`${e.width}px`}},e.name)))}),(0,g.jsx)("thead",{className:m("head"),children:(0,g.jsx)("tr",{children:e.map((e=>{var t;const o=l.columnId===e.name?l.sortOrder:void 0,a=n&&(null!==(t=e.resizeable)&&void 0!==t?t:s);return(0,g.jsx)(E,{column:e,resizeable:a,sortOrder:o,defaultSortOrder:r,onSort:u,rowHeight:i,onColumnsResize:n},e.name)}))})})]})},T=({limit:e=20,initialEntitiesCount:t,fetchData:n,filters:s,tableName:i,columns:l,getRowClassName:d,rowHeight:u=o,scrollContainerRef:c,onColumnsResize:h,renderErrorMessage:v,renderEmptyDataMessage:f,containerClassName:S,onDataFetched:k,keepCache:y=!0})=>{const{tableState:b,setSortParams:N,setTotalEntities:x,setFoundEntities:w,setIsInitialLoad:I}=(0,r.WV)(),{sortParams:C,foundEntities:P}=b,j=a.useRef(null),E=(({scrollContainerRef:e,tableRef:t,totalItems:n,rowHeight:s,chunkSize:o,overscanCount:r=1})=>{const i=a.useMemo((()=>Math.ceil(n/o)),[o,n]),[l,d]=a.useState(0),[u,c]=a.useState(Math.min(r,Math.max(i-1,0))),m=a.useCallback((()=>{const n=null===e||void 0===e?void 0:e.current,a=t.current;if(!n||!a)return null;const l=function(e,t){let n=e,s=0;for(;n&&n!==t;)s+=n.offsetTop,n=n.offsetParent;return s}(a,n),d=n.scrollTop,u=Math.max(d-l,0),c=u+n.clientHeight;return{start:Math.max(Math.floor(u/s/o)-r,0),end:Math.min(Math.floor(c/s/o)+r,Math.max(i-1,0))}}),[e,t,s,o,r,i]),h=a.useCallback((()=>{const e=m();e&&(d(e.start),c(e.end))}),[m]);a.useEffect((()=>{h()}),[i,h]);const g=a.useCallback((()=>{h()}),[h]);return a.useEffect((()=>{const e=p((()=>{h()}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[h]),a.useEffect((()=>{const t=null===e||void 0===e?void 0:e.current;if(!t)return;const n=p(g);return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)}}),[g,e]),a.useMemo((()=>{const e=Array(i).fill(!1);for(let t=l;t<=u;t++)e[t]=!0;return e}),[i,l,u])})({scrollContainerRef:c,tableRef:j,totalItems:P,rowHeight:u,chunkSize:e}),[T,U]=a.useState(s);a.useEffect((()=>{U(s)}),[s]);const R=a.useMemo((()=>P?P%e||e:1),[P,e]),G=a.useCallback((e=>{e&&(x(e.total),w(e.found),I(!1),null===k||void 0===k||k(e))}),[k,w,I,x]);a.useLayoutEffect((()=>{const e=t||1;x(t||0),w(e),I(!0)}),[t,x,w,I]);return(0,g.jsx)("div",{ref:j,className:m(null,S),children:(0,g.jsxs)("table",{className:m("table"),children:[(0,g.jsx)(A,{columns:l,onSort:N,onColumnsResize:h}),E.map(((t,s)=>(0,g.jsx)(D,{id:s,calculatedCount:s===E.length-1?R:e,chunkSize:e,rowHeight:u,columns:l,fetchData:n,filters:T,tableName:i,sortParams:C,getRowClassName:d,renderErrorMessage:v,renderEmptyDataMessage:f,onDataFetched:G,isActive:t,keepCache:y},s)))]})})};var U=n(16819);function R({columnsWidthLSKey:e,columns:t,...n}){const[s,o]=(0,U.a)(e),a=function(e,t){return e.map((e=>{var n;return{...e,width:null!==(n=t[e.name])&&void 0!==n?n:e.width}}))}(t,s);return(0,g.jsx)(T,{columns:a,onColumnsResize:o,containerClassName:m("resizeable-table-container"),...n})}},40781:(e,t,n)=>{function s(e,t){const n=e.reduce(((e,n)=>(t[n].forEach((t=>{e.add(t)})),e)),new Set);return Array.from(n).sort()}n.d(t,{R:()=>s})},41775:(e,t,n)=>{n.d(t,{v:()=>i});n(59284);var s=n(77506),o=n(10662),a=n(60712);const r=(0,s.cn)("ydb-search"),i=({onChange:e,value:t="",width:n,className:s,debounce:i,placeholder:l,inputRef:d})=>(0,a.jsx)(o.i,{debounce:i,hasClear:!0,autoFocus:!0,controlRef:d,style:{width:n},className:r(null,s),placeholder:l,value:t,onUpdate:e})},42265:(e,t,n)=>{n.d(t,{o:()=>r});n(59284);var s=n(69326),o=n(49554),a=n(60712);const r=({controls:e,table:t,tableProps:n,error:r,initialState:i,fullHeight:l=!0})=>(0,a.jsx)(o.jV,{initialState:i,children:(0,a.jsxs)(s.L,{fullHeight:l,children:[(0,a.jsx)(s.L.Controls,{children:e}),r,(0,a.jsx)(s.L.Table,{...n||{},children:t})]})})},43951:(e,t,n)=>{n.d(t,{K:()=>a});var s=n(59284),o=n(59001);const a=(e,t,n,a,r)=>{const[i,l]=s.useState((()=>o.f.readUserSettingsValue(t,a)));return{columnsToShow:s.useMemo((()=>e.filter((e=>{const t=e.name,n=i.includes(t),s=null===r||void 0===r?void 0:r.includes(t);return n||s}))),[e,r,i]),columnsToSelect:s.useMemo((()=>e.map((e=>e.name)).map((e=>{const t=null===r||void 0===r?void 0:r.includes(e),s=i.includes(e);return{id:e,title:n[e],selected:t||s,required:t,sticky:t?"start":void 0}}))),[e,n,r,i]),setColumns:s.useCallback((e=>{const n=e.filter((e=>e.selected)).map((e=>e.id));o.f.setUserSettingsValue(t,n),l(n)}),[t])}}},47199:(e,t,n)=>{n.d(t,{z:()=>Ge});var s=n(12888),o=n(59284),a=n(98167),r=n(67028),i=n(80987),l=n(370);const d={all:"all",missing:"missing",space:"space"},u={groups:"groups",nodes:"nodes"},c=l.z.nativeEnum(d).catch(d.all),m=l.z.nativeEnum(u).catch(u.groups);var p=n(78034),h=n(74319),g=n(86782);const v=["NodeId","Host","Uptime","CPU","RAM","PDisks"],f=["NodeId"],S=["Host","DC","Rack","Version","Uptime","Missing","DiskSpaceUsage"],k=S.map((e=>({value:e,content:(0,g.kn)(e)}))),y=l.z.custom((e=>S.includes(e))).catch(void 0);function b(){var e;const[t,n]=(0,i.useQueryParams)({type:i.StringParam,visible:i.StringParam,search:i.StringParam,uptimeFilter:i.StringParam,storageNodesGroupBy:i.StringParam,storageGroupsGroupBy:i.StringParam}),s=m.parse(t.type),o=c.parse(t.visible),a=null!==(e=t.search)&&void 0!==e?e:"",r=p.Bm.parse(t.uptimeFilter),l=h.kY.parse(t.storageGroupsGroupBy),d=y.parse(t.storageNodesGroupBy),u=e=>{n({visible:e},"replaceIn")},g=e=>{n({uptimeFilter:e},"replaceIn")};return{storageType:s,visibleEntities:o,searchValue:a,nodesUptimeFilter:r,storageGroupsGroupByParam:l,storageNodesGroupByParam:d,handleTextFilterChange:e=>{n({search:e||void 0},"replaceIn")},handleVisibleEntitiesChange:u,handleStorageTypeChange:e=>{n({type:e},"replaceIn")},handleUptimeFilterChange:g,handleStorageGroupsGroupByParamChange:e=>{n({storageGroupsGroupBy:e},"replaceIn")},handleStorageNodesGroupByParamChange:e=>{n({storageNodesGroupBy:e},"replaceIn")},handleShowAllGroups:()=>{u("all")},handleShowAllNodes:()=>{u("all"),g(p.cW.All)}}}var N=n(79553),D=n(42265),x=n(10174),w=n(90182),I=n(81101),C=n(40427),P=n(10731),j=n(91157),E=n(60712);const A=({visibleEntities:e,onShowAll:t})=>{let n;return e===d.space&&(n=(0,j.A)("empty.out_of_space")),e===d.missing&&(n=(0,j.A)("empty.degraded")),n?(0,E.jsx)(P.U,{title:n,showAll:(0,j.A)("show_all"),onShowAll:t}):null};var T=n(16029),U=n(69464),R=n(40781);const G=({columns:e,database:t,nodeId:n,groupId:s,pDiskId:i,filterGroup:l,filterGroupBy:u,searchValue:c,visibleEntities:m,onShowAll:p,scrollContainerRef:g,renderErrorMessage:v,initialEntitiesCount:f})=>{const S=(0,r.Pm)(),k=(0,r.YA)(),y=(b=k,o.useCallback((async e=>{const{limit:t,offset:n,sortParams:s,filters:o,columnsIds:a}=e,{sortOrder:r,columnId:i}=null!==s&&void 0!==s?s:{},{searchValue:l,visibleEntities:d,database:u,nodeId:c,groupId:m,pDiskId:p,filterGroup:g,filterGroupBy:v}=null!==o&&void 0!==o?o:{},f=(0,h.GP)(i),S=f?(0,U.T)(f,r):void 0,k=(0,R.R)(a,h.YX),{groups:y,found:N,total:D}=await(0,T.t)({limit:t,offset:n,sort:S,filter:l,with:d,database:u,nodeId:c,groupId:m,pDiskId:p,filter_group:g,filter_group_by:v,fieldsRequired:k,shouldUseGroupsHandler:b});return{data:y||[],found:N||0,total:D||0}}),[b]));var b;const N=o.useMemo((()=>({searchValue:c,visibleEntities:m,database:t,nodeId:n,groupId:s,pDiskId:i,filterGroup:l,filterGroupBy:u})),[c,m,t,n,s,i,l,u]);return(0,E.jsx)(a.r,{loading:!S,children:(0,E.jsx)(C.k5,{columnsWidthLSKey:h.qK,scrollContainerRef:g,columns:e,fetchData:y,initialEntitiesCount:f,renderErrorMessage:v,renderEmptyDataMessage:()=>m!==d.all?(0,E.jsx)(A,{onShowAll:p,visibleEntities:m}):(0,j.A)("empty.default"),filters:N,tableName:"storage-groups"})})};var M=n(43951),L=n(74006);function z({visibleEntities:e,viewContext:t}){const n=(0,s.X)(),a=o.useMemo((()=>{const e=(0,L.J)({viewContext:t});return n?e:e.filter((e=>!(0,h.Ai)(e.name)))}),[n,t]),r=o.useMemo((()=>e===d.missing?[...h.LO,h.UW.Degraded]:e===d.space?[...h.LO,h.UW.DiskSpace]:h.LO),[e]);return(0,M.K)(a,h.zY,h.H6,h.hu,r)}var V=n(71708),W=n(62710),F=n(48372);const O=JSON.parse('{"groups":"Groups","nodes":"Nodes","controls_groups-search-placeholder":"Group ID, Pool name","controls_nodes-search-placeholder":"Node ID, FQDN","controls_group-by-placeholder":"Group by:","no-nodes":"No such nodes","no-groups":"No such groups"}'),H=(0,F.g4)("ydb-storage",{en:O});var _=n(77506);const B=(0,_.cn)("global-storage");var $=n(69775),Y=n(98089),K=n(24555),J=n(53755),Q=n(49554),X=n(41775),q=n(44433);const Z={[u.groups]:"Groups",[u.nodes]:"Nodes"},ee=({value:e,onChange:t})=>(0,E.jsxs)(q.a,{value:e,onUpdate:t,qa:"storage-type-filter",children:[(0,E.jsx)(q.a.Option,{value:u.groups,children:Z[u.groups]}),(0,E.jsx)(q.a.Option,{value:u.nodes,children:Z[u.nodes]})]}),te={[d.all]:"All",[d.missing]:"Degraded",[d.space]:"Out of Space"},ne=({value:e,onChange:t})=>(0,E.jsxs)(q.a,{value:e,onUpdate:t,qa:"storage-visible-entities-filter",children:[(0,E.jsx)(q.a.Option,{value:d.missing,children:te[d.missing]}),(0,E.jsx)(q.a.Option,{value:d.space,children:te[d.space]}),(0,E.jsx)(q.a.Option,{value:d.all,children:te[d.all]})]});function se({withTypeSelector:e,withGroupBySelect:t,entitiesCountCurrent:n,entitiesCountTotal:a,entitiesLoading:r,columnsToSelect:i,handleSelectedColumnsUpdate:l}){const{searchValue:d,storageType:u,visibleEntities:c,storageGroupsGroupByParam:m,handleTextFilterChange:p,handleStorageTypeChange:g,handleVisibleEntitiesChange:v,handleStorageGroupsGroupByParamChange:f}=b(),S=(0,s.X)(),k=e&&S;return(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)(X.v,{value:d,onChange:p,placeholder:H("controls_groups-search-placeholder"),className:B("search")}),k&&(0,E.jsx)(ee,{value:u,onChange:g}),t?null:(0,E.jsx)(ne,{value:c,onChange:v}),(0,E.jsx)($.O,{popupWidth:200,items:i,showStatus:!0,onUpdate:l,sortable:!1}),t?(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)(Y.E,{variant:"body-2",children:H("controls_group-by-placeholder")}),(0,E.jsx)(K.l,{hasClear:!0,placeholder:"-",width:150,defaultValue:m?[m]:void 0,onUpdate:e=>{f(e[0])},options:h.SE})]}):null,(0,E.jsx)(J.T,{label:H("groups"),loading:r,total:a,current:n})]})}function oe({withTypeSelector:e,withGroupBySelect:t,columnsToSelect:n,handleSelectedColumnsUpdate:s}){const{tableState:o}=(0,Q.WV)();return(0,E.jsx)(se,{withTypeSelector:e,withGroupBySelect:t,entitiesCountCurrent:o.foundEntities,entitiesCountTotal:o.totalEntities,entitiesLoading:o.isInitialLoad,columnsToSelect:n,handleSelectedColumnsUpdate:s})}const ae=o.memo((function({name:e,count:t,isExpanded:n,database:s,nodeId:o,groupId:a,pDiskId:r,searchValue:i,scrollContainerRef:l,filterGroupBy:d,columns:u,onIsExpandedChange:c,handleShowAllGroups:m}){return(0,E.jsx)(V.Q,{title:e,count:t,entityName:H("groups"),expanded:n,onIsExpandedChange:c,children:(0,E.jsx)(G,{database:s,scrollContainerRef:l,nodeId:o,groupId:a,pDiskId:r,filterGroup:e,filterGroupBy:d,searchValue:i,visibleEntities:"all",onShowAll:m,renderErrorMessage:I.$,columns:u,initialEntitiesCount:t})},e)}));function re({database:e,nodeId:t,groupId:n,pDiskId:s,scrollContainerRef:a,viewContext:r}){const[i]=(0,w.Nt)(),{searchValue:l,storageGroupsGroupByParam:d,visibleEntities:u,handleShowAllGroups:c}=b(),{columnsToShow:m,columnsToSelect:p,setColumns:h}=z({visibleEntities:u,viewContext:r}),{currentData:g,isFetching:v,error:f}=x.S.useGetStorageGroupsInfoQuery({database:e,with:"all",nodeId:t,groupId:n,pDiskId:s,filter:l,shouldUseGroupsHandler:!0,group:d},{pollingInterval:i}),S=void 0===g&&v,{tableGroups:k,found:y=0,total:I=0}=g||{},{expandedGroups:C,setIsGroupExpanded:P}=(0,W.$)(k),j=o.useMemo((()=>({foundEntities:y,totalEntities:I,isInitialLoad:S,sortParams:void 0})),[y,I,S]);return(0,E.jsx)(D.o,{controls:(0,E.jsx)(se,{withTypeSelector:!0,withGroupBySelect:!0,entitiesCountCurrent:y,entitiesCountTotal:I,entitiesLoading:S,columnsToSelect:p,handleSelectedColumnsUpdate:h}),error:f?(0,E.jsx)(N.o,{error:f}):null,table:null!==k&&void 0!==k&&k.length?k.map((({name:o,count:r})=>{const i=C[o];return(0,E.jsx)(ae,{name:o,count:r,isExpanded:i,database:e,nodeId:t,groupId:n,pDiskId:s,filterGroupBy:d,searchValue:l,visibleEntities:"all",scrollContainerRef:a,onIsExpandedChange:P,handleShowAllGroups:c,columns:m},o)})):H("no-groups"),initialState:j,tableProps:{scrollContainerRef:a,scrollDependencies:[l,d,k],loading:S,className:B("groups-wrapper")}})}function ie({database:e,nodeId:t,groupId:n,pDiskId:s,viewContext:o,scrollContainerRef:a,initialEntitiesCount:i}){const{searchValue:l,visibleEntities:d,handleShowAllGroups:u}=b(),c=(0,r.SA)(),{columnsToShow:m,columnsToSelect:p,setColumns:h}=z({visibleEntities:d,viewContext:o});return(0,E.jsx)(D.o,{controls:(0,E.jsx)(oe,{withTypeSelector:!0,withGroupBySelect:c,columnsToSelect:p,handleSelectedColumnsUpdate:h}),table:(0,E.jsx)(G,{database:e,nodeId:t,groupId:n,pDiskId:s,searchValue:l,visibleEntities:d,onShowAll:u,scrollContainerRef:a,renderErrorMessage:I.$,columns:m,initialEntitiesCount:i}),tableProps:{scrollContainerRef:a,scrollDependencies:[l,d]},fullHeight:!0})}function le(e){const{storageGroupsGroupByParam:t,visibleEntities:n,handleShowAllGroups:s}=b(),i=(0,r.Pm)(),l=(0,r.SA)();o.useEffect((()=>{l&&"all"!==n&&s()}),[s,l,n]);return(0,E.jsx)(a.r,{loading:!i,children:l&&t?(0,E.jsx)(re,{...e}):(0,E.jsx)(ie,{...e})})}var de=n(44508);const ue=JSON.parse('{"empty.default":"No such nodes","empty.out_of_space":"No nodes with out of space errors","empty.degraded":"No degraded nodes","empty.small_uptime":"No nodes with uptime < 1h","empty.several_filters":"No nodes match current filters combination","show_all":"Show all nodes"}'),ce=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432","empty.out_of_space":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0443\u0437\u043b\u043e\u0432","empty.small_uptime":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432 \u0441 uptime < 1h","empty.several_filters":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0443\u0437\u043b\u044b"}'),me=(0,F.g4)("ydb-storage-nodes",{ru:ce,en:ue}),pe=({visibleEntities:e,nodesUptimeFilter:t,onShowAll:n})=>{let s;return e===d.space&&(s=me("empty.out_of_space")),e===d.missing&&(s=me("empty.degraded")),t===p.cW.SmallUptime&&(s=me("empty.small_uptime")),e!==d.all&&t!==p.cW.All&&(s=me("empty.several_filters")),s?(0,E.jsx)(P.U,{title:s,showAll:me("show_all"),onShowAll:n}):null};var he=n(11905);const ge=async e=>{const{type:t="static",storage:n=!0,limit:s,offset:o,sortParams:a,filters:r,columnsIds:i}=e,{searchValue:l,nodesUptimeFilter:d,visibleEntities:u,database:c,nodeId:m,groupId:h,filterGroup:v,filterGroupBy:f}=null!==r&&void 0!==r?r:{},{sortOrder:S,columnId:k}=null!==a&&void 0!==a?a:{},y=(0,g.kU)(k),b=y?(0,U.T)(y,S):void 0,N=(0,R.R)(i,g.fN),D=await window.api.viewer.getNodes({type:t,storage:n,limit:s,offset:o,sort:b,filter:l,uptime:(0,p.Fo)(d),with:u,database:c,node_id:m,group_id:h,filter_group:v,filter_group_by:f,fieldsRequired:N}),x=(0,he.rz)(D);return{data:x.nodes||[],found:x.found||0,total:x.total||0,columnsSettings:x.columnsSettings}},ve=(0,_.cn)("ydb-storage-nodes"),fe=e=>ve("node",{unavailable:(0,p.X7)(e)}),Se=({columns:e,database:t,nodeId:n,groupId:s,filterGroup:a,filterGroupBy:r,searchValue:i,visibleEntities:l,nodesUptimeFilter:u,onShowAll:c,scrollContainerRef:m,renderErrorMessage:h,initialEntitiesCount:g,onDataFetched:v})=>{const f=o.useMemo((()=>({searchValue:i,visibleEntities:l,nodesUptimeFilter:u,database:t,nodeId:n,groupId:s,filterGroup:a,filterGroupBy:r})),[i,l,u,t,n,s,a,r]);return(0,E.jsx)(C.k5,{columnsWidthLSKey:"storageNodesColumnsWidth",scrollContainerRef:m,columns:e,fetchData:ge,rowHeight:51,initialEntitiesCount:g,renderErrorMessage:h,renderEmptyDataMessage:()=>l!==d.all||u!==p.cW.All?(0,E.jsx)(pe,{onShowAll:c,nodesUptimeFilter:u,visibleEntities:l}):me("empty.default"),getRowClassName:fe,filters:f,tableName:"storage-nodes",onDataFetched:v})};var ke=n(156),ye=n(64934);function be({withTypeSelector:e,withGroupBySelect:t,entitiesCountCurrent:n,entitiesCountTotal:s,entitiesLoading:a,columnsToSelect:r,handleSelectedColumnsUpdate:i}){const{searchValue:l,storageType:d,visibleEntities:u,nodesUptimeFilter:c,storageNodesGroupByParam:m,handleTextFilterChange:p,handleStorageTypeChange:h,handleVisibleEntitiesChange:g,handleUptimeFilterChange:v,handleStorageNodesGroupByParamChange:f}=b();return(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)(X.v,{value:l,onChange:p,placeholder:H("controls_nodes-search-placeholder"),className:B("search")}),e&&(0,E.jsx)(ee,{value:d,onChange:h}),t?null:(0,E.jsx)(ne,{value:u,onChange:g}),t?null:(0,E.jsx)(ye.j,{value:c,onChange:v}),(0,E.jsx)($.O,{popupWidth:200,items:r,showStatus:!0,onUpdate:i,sortable:!1}),t?(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)(Y.E,{variant:"body-2",children:H("controls_group-by-placeholder")}),(0,E.jsx)(K.l,{hasClear:!0,placeholder:"-",width:150,defaultValue:m?[m]:void 0,onUpdate:e=>{f(e[0])},options:k})]}):null,(0,E.jsx)(J.T,{label:H("nodes"),loading:a,total:s,current:n})]})}function Ne({withTypeSelector:e,withGroupBySelect:t,columnsToSelect:n,handleSelectedColumnsUpdate:s}){const{tableState:o}=(0,Q.WV)();return(0,E.jsx)(be,{withTypeSelector:e,withGroupBySelect:t,entitiesCountCurrent:o.foundEntities,entitiesCountTotal:o.totalEntities,entitiesLoading:o.isInitialLoad,columnsToSelect:n,handleSelectedColumnsUpdate:s})}var De=n(88655),xe=n(4557),we=n(78762),Ie=n(10576);const Ce=(0,_.cn)("ydb-storage-nodes-columns"),Pe=({viewContext:e,columnsSettings:t})=>({name:g.vg.PDisks,header:g.uG.PDisks,className:Ce("pdisks-column"),width:null===t||void 0===t?void 0:t.pDiskContainerWidth,render:({row:n})=>{var s;return(0,E.jsx)("div",{className:Ce("pdisks-wrapper"),children:null===(s=n.PDisks)||void 0===s?void 0:s.map((s=>{var o;const a=null===(o=n.VDisks)||void 0===o?void 0:o.filter((e=>e.PDiskId===s.PDiskId));return(0,E.jsx)("div",{className:Ce("pdisks-item"),children:(0,E.jsx)(Ie.E,{data:s,vDisks:a,viewContext:e,width:null===t||void 0===t?void 0:t.pDiskWidth})},s.PDiskId)}))})},align:xe.Ay.CENTER,sortable:!1,resizeable:!1});function je({visibleEntities:e,database:t,additionalNodesProps:n,viewContext:s,columnsSettings:a}){const r=o.useMemo((()=>(({database:e,additionalNodesProps:t,viewContext:n,columnsSettings:s})=>{const o=null===t||void 0===t?void 0:t.getNodeRef;return[(0,we._E)(),(0,we.Nh)({getNodeRef:o,database:e}),(0,we.eT)(),(0,we.uk)(),(0,we.OX)(),(0,we.jl)(),(0,we.fr)(),(0,we.kv)(),(0,we.pH)(),(0,we.iX)(),(0,we.Bg)(),(0,we.Rn)(),(0,we.Vz)(),Pe({viewContext:n,columnsSettings:s})].map((e=>({...e,sortable:(0,g.sp)(e.name)})))})({database:t,additionalNodesProps:n,viewContext:s,columnsSettings:a})),[t,n,s,a]),i=o.useMemo((()=>e===d.missing?[...f,g.vg.Missing]:f),[e]);return(0,M.K)(r,"storageNodesSelectedColumns",g.uG,v,i)}function Ee({database:e,viewContext:t,columnsSettings:n}){const s=(0,De.E)(),{visibleEntities:o}=b();return je({additionalNodesProps:s,visibleEntities:o,database:e,viewContext:t,columnsSettings:n})}const Ae=o.memo((function({name:e,count:t,isExpanded:n,database:s,nodeId:o,groupId:a,searchValue:r,scrollContainerRef:i,filterGroupBy:l,columns:d,onIsExpandedChange:u,handleShowAllNodes:c,onDataFetched:m}){return(0,E.jsx)(V.Q,{title:e,count:t,entityName:H("nodes"),expanded:n,onIsExpandedChange:u,children:(0,E.jsx)(Se,{database:s,scrollContainerRef:i,nodeId:o,groupId:a,filterGroup:e,filterGroupBy:l,searchValue:r,visibleEntities:"all",nodesUptimeFilter:p.cW.All,onShowAll:c,renderErrorMessage:I.$,columns:d,initialEntitiesCount:t,onDataFetched:m})},e)}));function Te({database:e,groupId:t,nodeId:n,viewContext:s,scrollContainerRef:a}){const[r]=(0,w.Nt)(),{searchValue:i,storageNodesGroupByParam:l,handleShowAllNodes:d}=b(),{handleDataFetched:u,columnsSettings:c}=(0,ke.fj)(),{columnsToShow:m,columnsToSelect:p,setColumns:h}=Ee({database:e,viewContext:s,columnsSettings:c}),{currentData:g,isFetching:v,error:f}=x.S.useGetStorageNodesInfoQuery({database:e,with:"all",filter:i,node_id:n,group_id:t,group:l},{pollingInterval:r}),S=void 0===g&&v,{tableGroups:k,found:y=0,total:N=0}=g||{},{expandedGroups:I,setIsGroupExpanded:C}=(0,W.$)(k),P=o.useMemo((()=>({foundEntities:y,totalEntities:N,isInitialLoad:S,sortParams:void 0})),[y,N,S]);return(0,E.jsx)(D.o,{controls:(0,E.jsx)(be,{withTypeSelector:!0,withGroupBySelect:!0,entitiesCountCurrent:y,entitiesCountTotal:N,entitiesLoading:S,columnsToSelect:p,handleSelectedColumnsUpdate:h}),error:f?(0,E.jsx)(de.o,{error:f}):null,table:null!==k&&void 0!==k&&k.length?k.map((({name:s,count:o})=>{const r=I[s];return(0,E.jsx)(Ae,{name:s,count:o,isExpanded:r,database:e,nodeId:n,groupId:t,searchValue:i,visibleEntities:"all",filterGroupBy:l,scrollContainerRef:a,onIsExpandedChange:C,handleShowAllNodes:d,columns:m,onDataFetched:u},s)})):H("no-nodes"),initialState:P,tableProps:{scrollContainerRef:a,scrollDependencies:[i,l,k],loading:S,className:B("groups-wrapper")}})}function Ue({database:e,nodeId:t,groupId:n,viewContext:s,scrollContainerRef:o,initialEntitiesCount:a}){const{searchValue:i,visibleEntities:l,nodesUptimeFilter:d,handleShowAllNodes:u}=b(),c=(0,r.Ye)(),{handleDataFetched:m,columnsSettings:p}=(0,ke.fj)(),{columnsToShow:h,columnsToSelect:g,setColumns:v}=Ee({database:e,viewContext:s,columnsSettings:p});return(0,E.jsx)(D.o,{controls:(0,E.jsx)(Ne,{withTypeSelector:!0,withGroupBySelect:c,columnsToSelect:g,handleSelectedColumnsUpdate:v}),table:(0,E.jsx)(Se,{database:e,nodeId:t,groupId:n,searchValue:i,visibleEntities:l,nodesUptimeFilter:d,onShowAll:u,scrollContainerRef:o,renderErrorMessage:I.$,columns:h,initialEntitiesCount:a,onDataFetched:m}),tableProps:{scrollContainerRef:o,scrollDependencies:[i,l,d]},fullHeight:!0})}function Re(e){const{storageNodesGroupByParam:t,visibleEntities:n,nodesUptimeFilter:s,handleShowAllNodes:i}=b(),l=(0,r.Pm)(),d=(0,r.Ye)();o.useEffect((()=>{!d||"all"===n&&s===p.cW.All||i()}),[i,s,d,n]);return(0,E.jsx)(a.r,{loading:!l,children:d&&t?(0,E.jsx)(Te,{...e}):(0,E.jsx)(Ue,{...e})})}const Ge=e=>{const{storageType:t}=b(),n=(0,s.X)();return"nodes"===t&&n?(0,E.jsx)(Re,{initialEntitiesCount:(0,ke.b0)(e.viewContext),...e}):(0,E.jsx)(le,{initialEntitiesCount:(0,ke.QQ)(e.viewContext),...e})}},48295:(e,t,n)=>{n.d(t,{_:()=>u});var s=n(77506),o=n(24543),a=n(80176),r=n(60712);const i=(0,s.cn)("ydb-pool-bar"),l=({data:e={}})=>{const{Usage:t=0}=e,n=Math.min(100*t,100),s=(e=>e>=75?"danger":e>=50&&e<75?"warning":"normal")(n);return(0,r.jsx)(o.u,{className:i({type:s}),content:(0,r.jsx)(a.HG,{data:e,className:i("popup-content")}),children:(0,r.jsx)("div",{style:{height:`${n}%`},className:i("value",{type:s})})})},d=(0,s.cn)("ydb-pools-graph"),u=({pools:e=[]})=>(0,r.jsx)("div",{className:d(),children:e.map(((e,t)=>(0,r.jsx)(l,{data:e},t)))})},49554:(e,t,n)=>{n.d(t,{WV:()=>l,jV:()=>i});var s=n(59284),o=n(60712);const a={sortParams:void 0,totalEntities:0,foundEntities:0,isInitialLoad:!0},r=s.createContext({tableState:a,setSortParams:()=>{},setTotalEntities:()=>{},setFoundEntities:()=>{},setIsInitialLoad:()=>{}}),i=({children:e,initialState:t={}})=>{var n,i,l,d;const[u,c]=s.useState(null!==(n=t.sortParams)&&void 0!==n?n:a.sortParams),[m,p]=s.useState(null!==(i=t.totalEntities)&&void 0!==i?i:a.totalEntities),[h,g]=s.useState(null!==(l=t.foundEntities)&&void 0!==l?l:a.foundEntities),[v,f]=s.useState(null!==(d=t.isInitialLoad)&&void 0!==d?d:a.isInitialLoad),S=s.useMemo((()=>({sortParams:u,totalEntities:m,foundEntities:h,isInitialLoad:v})),[u,m,h,v]),k=s.useMemo((()=>({tableState:S,setSortParams:c,setTotalEntities:p,setFoundEntities:g,setIsInitialLoad:f})),[S,c,p,g,f]);return(0,o.jsx)(r.Provider,{value:k,children:e})},l=()=>{const e=s.useContext(r);if(void 0===e)throw new Error("usePaginatedTableState must be used within a PaginatedTableStateProvider");return e}},50672:(e,t,n)=>{n.d(t,{D:()=>a});var s=n(48372);const o=JSON.parse('{"type":"Type","path":"Path","guid":"GUID","serial-number":"Serial Number","shared-with-os":"SharedWithOs","drive-status":"Drive Status","state":"State","device":"Device","realtime":"Realtime","space":"Space","slots":"Slots","log-size":"Log Size","system-size":"System Size","links":"Links","developer-ui":"Developer UI","pdisk-page":"PDisk page","yes":"Yes"}'),a=(0,s.g4)("ydb-pDisk-info",{en:o})},51930:(e,t,n)=>{n.d(t,{d:()=>a});var s=n(5707),o=n(7187);function a(e){const t=function(e){return t=e,void 0!==t&&t in s.iZ?s.iZ[e]:s.Km;var t}(e.State),n=(0,o.SW)(e.AllocatedPercent);return t!==s.Km&&n?Math.max(t,n):t}},53755:(e,t,n)=>{n.d(t,{T:()=>l});var s=n(47665),o=n(77506);const a=(0,n(48372).g4)("ydb-entities-count",{ru:{of:"\u0438\u0437"},en:{of:"of"}});var r=n(60712);const i=(0,o.cn)("ydb-entities-count"),l=({total:e,current:t,label:n,loading:o,className:l})=>{let d="";return n&&(d+=`${n}: `),o?d+="...":(d+=`${t}`,e&&Number(e)!==Number(t)&&(d+=` ${a("of")} ${e}`)),(0,r.jsx)(s.J,{theme:"info",size:"m",className:i(null,l),children:d})}},58267:(e,t,n)=>{n.d(t,{P:()=>r,_:()=>i});var s=n(54090),o=n(6354);const a={[o.r.Dead]:s.m.Red,[o.r.Created]:s.m.Yellow,[o.r.ResolveStateStorage]:s.m.Yellow,[o.r.Candidate]:s.m.Yellow,[o.r.BlockBlobStorage]:s.m.Yellow,[o.r.WriteZeroEntry]:s.m.Yellow,[o.r.Restored]:s.m.Yellow,[o.r.Discover]:s.m.Yellow,[o.r.Lock]:s.m.Yellow,[o.r.Stopped]:s.m.Yellow,[o.r.ResolveLeader]:s.m.Yellow,[o.r.RebuildGraph]:s.m.Yellow,[o.r.Deleted]:s.m.Green,[o.r.Active]:s.m.Green},r=e=>{if(!e)return s.m.Grey;return t=e,Object.values(s.m).includes(t)?e:a[e];var t};function i(e){if(!e)return"unknown";switch(e){case o.r.Dead:return"danger";case o.r.Active:case o.r.Deleted:return"success";default:return"warning"}}},62710:(e,t,n)=>{n.d(t,{$:()=>o});var s=n(59284);function o(e){const[t,n]=s.useState({});s.useEffect((()=>{null!==e&&void 0!==e&&e.length&&n((t=>e.reduce(((e,{name:n})=>{const s=t[n];return{...e,[n]:null!==s&&void 0!==s&&s}}),{})))}),[e]);return{expandedGroups:t,setIsGroupExpanded:s.useCallback(((e,t)=>{n((n=>({...n,[e]:t})))}),[])}}},64036:(e,t,n)=>{n.d(t,{b:()=>a});var s=n(54090),o=n(5707);function a(e){const{DiskSpace:t,VDiskState:n,FrontQueues:s,Replicated:a}=e;if(!n)return o.Km;const i=r(t),l=function(e){var t;if(!e)return o.Km;return null!==(t=o.qs[e])&&void 0!==t?t:o.Km}(n),d=Math.min(o.aW.Orange,r(s));let u=Math.max(i,l,d);return!1===a&&u===o.aW.Green&&(u=o.aW.Blue),u}function r(e){var t;return e?e===s.m.Blue?o.aW.Green:null!==(t=o.aW[e])&&void 0!==t?t:o.Km:o.Km}},64934:(e,t,n)=>{n.d(t,{j:()=>r});var s=n(44433),o=n(78034),a=n(60712);const r=({value:e,onChange:t,className:n})=>(0,a.jsxs)(s.a,{value:e,onUpdate:t,className:n,children:[(0,a.jsx)(s.a.Option,{value:o.cW.All,children:o.DG[o.cW.All]}),(0,a.jsx)(s.a.Option,{value:o.cW.SmallUptime,children:o.DG[o.cW.SmallUptime]})]})},67375:(e,t,n)=>{n.d(t,{W:()=>s});let s=function(e){return e.Initial="Initial",e.LocalRecoveryError="LocalRecoveryError",e.SyncGuidRecovery="SyncGuidRecovery",e.SyncGuidRecoveryError="SyncGuidRecoveryError",e.OK="OK",e.PDiskError="PDiskError",e}({})},69326:(e,t,n)=>{n.d(t,{L:()=>d});var s=n(59284),o=n(87184),a=n(77506),r=n(19228);var i=n(60712);const l=(0,a.cn)("ydb-table-with-controls-layout"),d=({children:e,className:t,fullHeight:n})=>(0,i.jsx)("div",{className:l({"full-height":n},t),children:e});d.Controls=function({children:e,renderExtraControls:t,className:n}){return(0,i.jsxs)(o.s,{justifyContent:"space-between",alignItems:"center",className:l("controls-wrapper"),gap:2,children:[(0,i.jsx)("div",{className:l("controls",n),children:e}),null===t||void 0===t?void 0:t()]})},d.Table=function({children:e,loading:t,className:n,scrollContainerRef:o,scrollDependencies:a=[]}){const d=s.useRef(null);return(({tableContainerRef:e,scrollContainerRef:t,dependencies:n=[]})=>{const o=s.useCallback((()=>{if(null!==e&&void 0!==e&&e.current){const t=window.getComputedStyle(e.current).getPropertyValue("--data-table-sticky-header-offset");return t?parseInt(t,10):0}return 0}),[e]),a=s.useCallback((()=>{if(null!==e&&void 0!==e&&e.current&&null!==t&&void 0!==t&&t.current){const n=o(),s=e.current.getBoundingClientRect(),a=t.current.getBoundingClientRect(),r=s.top-a.top+t.current.scrollTop;s.top-n<a.top&&t.current.scrollTo(0,r-n)}}),[t,e,o]);s.useLayoutEffect((()=>{e&&t&&a()}),[a,e,t,...n])})({tableContainerRef:d,scrollContainerRef:o,dependencies:a}),t?(0,i.jsx)(r.Q,{className:l("loader")}):(0,i.jsx)("div",{ref:d,className:l("table",n),children:e})}},69464:(e,t,n)=>{n.d(t,{T:()=>o});var s=n(6388);n(23536);const o=(e,t=s.xN)=>t===s.xN?`-${e}`:e},71708:(e,t,n)=>{n.d(t,{Q:()=>d});n(59284);var s=n(33705),o=n(98089),a=n(47665),r=n(77506),i=n(60712);const l=(0,r.cn)("ydb-table-group"),d=({children:e,title:t,entityName:n,count:r,expanded:d=!1,onIsExpandedChange:u})=>{const c=()=>{u(t,!d)};return(0,i.jsxs)("div",{className:l(null),children:[(0,i.jsx)("button",{onClick:c,className:l("button"),title:t,children:(0,i.jsxs)("div",{className:l("title-wrapper"),children:[(0,i.jsx)(s.I,{direction:d?"top":"bottom"}),(0,i.jsxs)("div",{className:l("title"),children:[(0,i.jsx)(o.E,{variant:"subheader-2",children:t}),(0,i.jsxs)(o.E,{variant:"body-2",color:"secondary",className:l("count"),children:[n,": ",(0,i.jsx)(a.J,{theme:"normal",children:r})]})]})]})}),d?(0,i.jsx)("div",{className:l("content"),children:e}):null]})};d.displayName="TableGroup"},73473:(e,t,n)=>{n.d(t,{S:()=>b});var s=n(38501),o=n(23900),a=n(46549),r=n(77506),i=n(76086),l=n(35736),d=n(41650),u=n(13096),c=n(15132),m=n(48372);const p=JSON.parse('{"text_external-consumption":"External Consumption","text_allocator-caches":"Allocator Caches","text_shared-cache":"Shared Cache","text_memtable":"MemTable","text_query-execution":"Query Execution","text_usage":"Usage","text_soft-limit":"Soft Limit","text_hard-limit":"Hard Limit","text_other":"Other"}'),h=(0,m.g4)("ydb-memory-viewer",{en:p});function g(e){return(0,d.kf)(e)?parseFloat(String(e)):void 0}var v=n(60712);const f=1,S=.01*i.J7,k=(0,r.cn)("memory-viewer"),y=(e,t)=>[(0,a.z3)({value:e,size:"gb",withSizeLabel:!1,precision:2}),(0,a.z3)({value:t,size:"gb",withSizeLabel:!0,precision:1})];function b({stats:e,percents:t,formatValues:n,className:r,warningThreshold:i,dangerThreshold:m}){var p;const b=null!==(p=e.AnonRss)&&void 0!==p?p:function(e){const t=g(e.AllocatedMemory)||0,n=g(e.AllocatorCachesMemory)||0;return String(t+n)}(e),N=e.HardLimit,D=(0,s.D)();let x=Math.floor(parseFloat(String(b))/parseFloat(String(N))*100)||0;x=x>100?100:x;let w=b,I=N,C="/";t?(w=x+"%",I="",C=""):n&&([w,I]=n(Number(b),Number(N)));const P=function(e,t){const n=[{label:h("text_shared-cache"),key:"SharedCacheConsumption",value:g(e.SharedCacheConsumption),capacity:g(e.SharedCacheLimit),isInfo:!1},{label:h("text_query-execution"),key:"QueryExecutionConsumption",value:g(e.QueryExecutionConsumption),capacity:g(e.QueryExecutionLimit),isInfo:!1},{label:h("text_memtable"),key:"MemTableConsumption",value:g(e.MemTableConsumption),capacity:g(e.MemTableLimit),isInfo:!1},{label:h("text_allocator-caches"),key:"AllocatorCachesMemory",value:g(e.AllocatorCachesMemory),isInfo:!1}],s=n.filter((e=>void 0!==e.value)).reduce(((e,t)=>e+t.value),0),o=Math.max(0,t-s);return n.push({label:h("text_other"),key:"Other",value:o,isInfo:!1}),n.push({label:h("text_external-consumption"),key:"ExternalConsumption",value:g(e.ExternalConsumption),isInfo:!0},{label:h("text_usage"),key:"Usage",value:t,isInfo:!0},{label:h("text_soft-limit"),key:"SoftLimit",value:g(e.SoftLimit),isInfo:!0},{label:h("text_hard-limit"),key:"HardLimit",value:g(e.HardLimit),isInfo:!0}),n.filter((e=>void 0!==e.value))}(e,Number(b)),j=(0,l.w)({fillWidth:x,warningThreshold:i,dangerThreshold:m,colorizeProgress:!0});let E=0;return(0,v.jsx)(u.P,{renderPopupContent:()=>(0,v.jsx)(o.u,{responsive:!0,children:P.map((({label:e,value:t,capacity:n,key:s})=>(0,v.jsx)(o.u.Item,{name:(0,v.jsxs)("div",{className:k("container"),children:[(0,v.jsx)("div",{className:k("legend",{type:s})}),(0,v.jsx)("div",{className:k("name"),children:e})]}),children:n?(0,v.jsx)(c.O,{value:t,capacity:n,formatValues:y,colorizeProgress:!0}):(0,a.z3)({value:t,size:"gb",withSizeLabel:!0,precision:2})},e)))}),children:(0,v.jsx)("div",{className:k({theme:D,status:j},r),children:(0,v.jsxs)("div",{className:k("progress-container"),children:[P.filter((({isInfo:e})=>!e)).map((e=>{if(e.value<S)return null;const t=Math.max((n=e.value,b?n/parseFloat(String(N))*100:0),f);var n;const s=E;return E+=t,(0,v.jsx)("div",{className:k("segment",{type:e.key}),style:{width:`${t}%`,left:`${s}%`}},e.key)})),(0,v.jsx)("div",{className:k("text"),children:(0,d.kf)(N)?`${w} ${C} ${I}`:w})]})})})}},74006:(e,t,n)=>{n.d(t,{J:()=>re,k:()=>ae});var s=n(79879),o=n(4557),a=n(63291),r=n(47665),i=n(84375),l=n(99991),d=n(71661),u=n(10508),c=n(33775),m=n(13342),p=n(92459),h=n(7435),g=n(77506),v=n(76086),f=n(56839),S=n(16439),k=n(73891),y=n(41650),b=n(59284),N=n(69033),D=n(87184),x=n(8809),w=n(10576),I=n(156),C=n(60712);const P=(0,g.cn)("ydb-storage-disks");function j({vDisks:e=[],viewContext:t,erasure:n}){const[s,o]=b.useState(),a=(0,I.Ep)(e,n),{theme:{spaceBaseSize:r}}=(0,N.L)();if(!e.length)return null;const i=(300-r*(e.length-1))/e.length;return(0,C.jsxs)("div",{className:P(null),children:[(0,C.jsx)(D.s,{direction:"row",gap:1,grow:!0,style:{width:300},children:null===e||void 0===e?void 0:e.map(((e,n)=>(0,C.jsx)(E,{vDisk:e,inactive:!(0,I.OH)(e,t),highlightedVDisk:s,setHighlightedVDisk:o,unavailableVDiskWidth:i},e.StringifiedId||n)))}),(0,C.jsx)("div",{className:P("pdisks-wrapper"),children:null===e||void 0===e?void 0:e.map(((e,t)=>{var n;return(0,C.jsx)(A,{vDisk:e,highlightedVDisk:s,setHighlightedVDisk:o,withDCMargin:a.includes(t)},(null===e||void 0===e||null===(n=e.PDisk)||void 0===n?void 0:n.StringifiedId)||t)}))})]})}function E({vDisk:e,highlightedVDisk:t,inactive:n,setHighlightedVDisk:s,unavailableVDiskWidth:o}){const a={...e,PDisk:void 0},r=e.StringifiedId,i=(0,y.kf)(a.AllocatedSize)?void 0:o,l=Number(a.AllocatedSize)||1;return(0,C.jsx)("div",{style:{flexGrow:l,minWidth:i},className:P("vdisk-item"),children:(0,C.jsx)(x.y,{data:a,compact:!0,inactive:n,showPopup:t===r,onShowPopup:()=>s(r),onHidePopup:()=>s(void 0),progressBarClassName:P("vdisk-progress-bar")})})}function A({vDisk:e,highlightedVDisk:t,setHighlightedVDisk:n,withDCMargin:s}){const o=e.StringifiedId;return e.PDisk?(0,C.jsx)(w.E,{className:P("pdisk-item",{"with-dc-margin":s}),progressBarClassName:P("pdisk-progress-bar"),data:e.PDisk,showPopup:t===o,onShowPopup:()=>n(o),onHidePopup:()=>n(void 0)}):null}var T=n(7187);const U="--ydb-stack-level",R=(0,g.cn)("stack"),G=({children:e,className:t})=>(0,C.jsx)("div",{className:R(null,t),children:b.Children.map(e,((e,t)=>b.isValidElement(e)?(0,C.jsx)("div",{className:R("layer"),style:{[U]:t},children:e}):null))});function M({data:e,className:t,stackClassName:n,...s}){const{Donors:o,...a}=e||{},r=o&&o.length>0?(0,C.jsxs)(G,{className:n,children:[(0,C.jsx)(x.y,{data:a,...s}),o.map((e=>{const t=(0,T.NJ)(e);return(0,C.jsx)(x.y,{data:e,...s},(0,f.U9)(t?e.VDiskId:e))}))]}):(0,C.jsx)(x.y,{data:e,...s});return(0,C.jsx)("div",{className:t,children:r})}const L=(0,g.cn)("ydb-storage-vdisks");function z({vDisks:e,viewContext:t,erasure:n}){const s=(0,I.Ep)(e,n);return(0,C.jsx)("div",{className:L("wrapper"),children:null===e||void 0===e?void 0:e.map(((e,n)=>(0,C.jsx)(M,{data:e,inactive:!(0,I.OH)(e,t),className:L("item",{"with-dc-margin":s.includes(n)})},e.StringifiedId)))})}var V=n(91157),W=n(74319);const F=(0,g.cn)("ydb-storage-groups-columns"),O={name:W.UW.PoolName,header:W.H6.PoolName,width:250,render:({row:e})=>e.PoolName?(0,C.jsx)(d.s,{content:e.PoolName,placement:["right"],behavior:a.m.Immediate,className:F("pool-name-wrapper"),children:(0,C.jsx)("span",{className:F("pool-name"),children:e.PoolName})}):v.Pd,align:o.Ay.LEFT},H={name:W.UW.MediaType,header:W.H6.MediaType,width:100,resizeMinWidth:100,align:o.Ay.LEFT,render:({row:e})=>(0,C.jsxs)("div",{children:[(0,C.jsx)(r.J,{children:e.MediaType||"\u2014"}),"\xa0",e.Encryption&&(0,C.jsx)(i.A,{content:(0,V.A)("encrypted"),placement:"right",behavior:a.m.Immediate,children:(0,C.jsx)(r.J,{children:(0,C.jsx)(l.I,{data:s.A,size:18})})})]}),sortable:!1},_={name:W.UW.Erasure,header:W.H6.Erasure,width:100,sortAccessor:e=>e.ErasureSpecies,render:({row:e})=>e.ErasureSpecies?e.ErasureSpecies:"-",align:o.Ay.LEFT},B={name:W.UW.Degraded,header:W.H6.Degraded,width:110,resizeMinWidth:110,render:({row:e})=>e.Degraded?(0,C.jsxs)(r.J,{theme:(0,I.k_)(e),children:["Degraded: ",e.Degraded]}):"-",align:o.Ay.LEFT,defaultOrder:o.Ay.DESCENDING},$={name:W.UW.State,header:W.H6.State,width:150,render:({row:e})=>{var t;return null!==(t=e.State)&&void 0!==t?t:v.Pd},align:o.Ay.LEFT,defaultOrder:o.Ay.DESCENDING},Y={name:W.UW.Usage,header:W.H6.Usage,width:85,resizeMinWidth:75,render:({row:e})=>(0,h.f8)(e.Usage)?(0,C.jsx)(m.U,{value:Math.floor(e.Usage),theme:(0,S.f)(e.Usage)}):v.Pd,align:o.Ay.LEFT},K={name:W.UW.DiskSpaceUsage,header:W.H6.DiskSpaceUsage,width:115,resizeMinWidth:75,render:({row:e})=>(0,h.f8)(e.DiskSpaceUsage)?(0,C.jsx)(m.U,{value:Math.floor(e.DiskSpaceUsage),theme:(0,S.f)(e.DiskSpaceUsage)}):v.Pd,align:o.Ay.LEFT},J={name:W.UW.GroupId,header:W.H6.GroupId,width:140,render:({row:e})=>e.GroupId?(0,C.jsx)(u.c,{name:String(e.GroupId),path:(0,p._g)(e.GroupId),hasClipboardButton:!0,showStatus:!1}):"-",sortAccessor:e=>Number(e.GroupId),align:o.Ay.LEFT},Q={name:W.UW.Used,header:W.H6.Used,width:100,render:({row:e})=>(0,y.wb)(e.Used,!0),align:o.Ay.RIGHT},X={name:W.UW.Limit,header:W.H6.Limit,width:100,render:({row:e})=>(0,y.wb)(e.Limit),align:o.Ay.RIGHT},q={name:W.UW.DiskSpace,header:W.H6.DiskSpace,width:70,render:({row:e})=>(0,C.jsx)(c.k,{status:e.DiskSpace}),align:o.Ay.CENTER},Z={name:W.UW.Read,header:W.H6.Read,width:100,render:({row:e})=>e.Read?(0,y.O4)(e.Read):"-",align:o.Ay.RIGHT},ee={name:W.UW.Write,header:W.H6.Write,width:100,render:({row:e})=>e.Write?(0,y.O4)(e.Write):"-",align:o.Ay.RIGHT},te={name:W.UW.Latency,header:W.H6.Latency,width:100,render:({row:e})=>(0,h.f8)(e.LatencyPutTabletLogMs)?(0,k.Xo)(e.LatencyPutTabletLogMs):v.Pd,align:o.Ay.RIGHT},ne={name:W.UW.AllocationUnits,header:W.H6.AllocationUnits,width:150,render:({row:e})=>(0,h.f8)(e.AllocationUnits)?(0,f.ZV)(e.AllocationUnits):v.Pd,align:o.Ay.RIGHT},se=e=>({name:W.UW.VDisks,header:W.H6.VDisks,className:F("vdisks-column"),render:({row:t})=>(0,C.jsx)(z,{vDisks:t.VDisks,viewContext:null===e||void 0===e?void 0:e.viewContext,erasure:t.ErasureSpecies}),align:o.Ay.CENTER,width:780,resizeable:!1,sortable:!1}),oe=e=>({name:W.UW.VDisksPDisks,header:W.H6.VDisksPDisks,className:F("disks-column"),render:({row:t})=>(0,C.jsx)(j,{vDisks:t.VDisks,viewContext:null===e||void 0===e?void 0:e.viewContext,erasure:t.ErasureSpecies}),align:o.Ay.CENTER,width:900,resizeable:!1,sortable:!1}),ae=()=>[J,H,_,Y,Q,X],re=e=>[J,O,H,_,B,$,Y,K,Q,X,q,Z,ee,te,ne,se(e),oe(e)].map((e=>({...e,sortable:(0,W.i4)(e.name)})))},74319:(e,t,n)=>{n.d(t,{hu:()=>m,YX:()=>k,LO:()=>p,UW:()=>d,H6:()=>h,qK:()=>i,SE:()=>f,zY:()=>l,GP:()=>b,Ai:()=>c,i4:()=>N,kY:()=>S});var s=n(370),o=n(48372);const a=JSON.parse('{"pool-name":"Pool Name","type":"Type","encryption":"Encryption","erasure":"Erasure","degraded":"Degraded","missing-disks":"Missing Disks","state":"State","usage":"Usage","disk-usage":"Disk usage","group-id":"Group ID","used":"Used","limit":"Limit","space":"Space","read":"Read","write":"Write","latency":"Latency","allocation-units":"Allocation Units","vdisks":"VDisks","vdisks-pdisks":"VDisks with PDisks"}'),r=(0,o.g4)("ydb-storage-groups-columns",{en:a}),i="storageGroupsColumnsWidth",l="storageGroupsSelectedColumns",d={GroupId:"GroupId",PoolName:"PoolName",MediaType:"MediaType",Erasure:"Erasure",Used:"Used",Limit:"Limit",Usage:"Usage",DiskSpaceUsage:"DiskSpaceUsage",DiskSpace:"DiskSpace",Read:"Read",Write:"Write",Latency:"Latency",AllocationUnits:"AllocationUnits",VDisks:"VDisks",VDisksPDisks:"VDisksPDisks",Degraded:"Degraded",State:"State"},u=["DiskSpaceUsage","Latency","AllocationUnits","VDisksPDisks"];function c(e){return u.includes(e)}const m=["GroupId","PoolName","Erasure","Used","VDisks"],p=["GroupId"],h={get PoolName(){return r("pool-name")},get MediaType(){return r("type")},get Erasure(){return r("erasure")},get GroupId(){return r("group-id")},get Used(){return r("used")},get Limit(){return r("limit")},get Usage(){return r("usage")},get DiskSpaceUsage(){return r("disk-usage")},get DiskSpace(){return r("space")},get Read(){return r("read")},get Write(){return r("write")},get Latency(){return r("latency")},get AllocationUnits(){return r("allocation-units")},get VDisks(){return r("vdisks")},get VDisksPDisks(){return r("vdisks-pdisks")},get Degraded(){return r("missing-disks")},get State(){return r("state")}},g={get GroupId(){return r("group-id")},get Erasure(){return r("erasure")},get Usage(){return r("usage")},get DiskSpaceUsage(){return r("disk-usage")},get PoolName(){return r("pool-name")},get Kind(){return r("type")},get Encryption(){return r("encryption")},get MediaType(){return r("type")},get MissingDisks(){return r("missing-disks")},get State(){return r("state")},get Latency(){return r("latency")}},v=["PoolName","MediaType","Encryption","Erasure","Usage","DiskSpaceUsage","State","MissingDisks","Latency"],f=v.map((e=>({value:e,content:g[e]}))),S=s.z.custom((e=>v.includes(e))).catch(void 0),k={GroupId:["GroupId"],PoolName:["PoolName"],MediaType:["MediaType","Encryption"],Erasure:["Erasure"],Used:["Used"],Limit:["Limit"],Usage:["Usage"],DiskSpaceUsage:["DiskSpaceUsage"],DiskSpace:["State"],Read:["Read"],Write:["Write"],Latency:["Latency"],AllocationUnits:["AllocationUnits"],VDisks:["VDisk","PDisk","Read","Write"],VDisksPDisks:["VDisk","PDisk","Read","Write"],Degraded:["MissingDisks"],State:["State"]},y={GroupId:"GroupId",PoolName:"PoolName",MediaType:"MediaType",Erasure:"Erasure",Used:"Used",Limit:"Limit",Usage:"Usage",DiskSpaceUsage:"DiskSpaceUsage",DiskSpace:void 0,Read:"Read",Write:"Write",Latency:"Latency",AllocationUnits:"AllocationUnits",VDisks:void 0,VDisksPDisks:void 0,Degraded:"Degraded",State:"State"};function b(e){return y[e]}function N(e){return Boolean(b(e))}},78461:(e,t,n)=>{n.d(t,{Y:()=>o});const s={HDD:"HDD",SSD:"SSD",MVME:"NVME"};function o(e){if(!e)return;const t=function(e,t){const n={};return Object.entries(t).reduce(((t,[s,o])=>{const a=e.length-t,r=a-o;return n[s]=e.substring(r,a)||"0",t+o}),0),n}(BigInt(e).toString(2),{isSolidState:1,kind:55,typeExt:8});if("1"===t.isSolidState)switch(parseInt(t.typeExt,2)){case 0:return s.SSD;case 2:return s.MVME}else if("0"===t.typeExt)return s.HDD}},78762:(e,t,n)=>{n.d(t,{pt:()=>ne,SH:()=>X,fr:()=>_,uk:()=>L,Bg:()=>Y,Nh:()=>G,ID:()=>B,fR:()=>$,iX:()=>O,Vz:()=>Q,H:()=>q,_E:()=>R,eT:()=>M,wN:()=>te,kv:()=>H,pH:()=>F,OX:()=>z,ui:()=>ee,DH:()=>Z,oz:()=>K,qp:()=>J,jl:()=>W,Rn:()=>V});var s=n(4557),o=n(23900),a=n(7435),r=n(77506),i=n(76086),l=n(56839),d=n(16439),u=n(41650),c=n(71661),m=n(73473),p=n(29819),h=n(31684),g=n(78034),v=n(10508),f=n(80176),S=n(60712);const k=({node:e,getNodeRef:t,database:n,statusForIcon:s})=>{if(!e.Host)return(0,S.jsx)("span",{children:"\u2014"});const o="ConnectStatus"===s?e.ConnectStatus:e.SystemState,a=!(0,g.X7)(e);let r;if(t){const n=t(e);r=n?(0,h.Un)(n):void 0}else if(e.NodeId){const t=(0,h.Kx)(e.NodeId);r=(0,h.Un)(t)}const i=a?(0,p.vI)(e.NodeId,{database:null!==n&&void 0!==n?n:e.TenantName},e.TenantName?"tablets":"storage"):void 0;return(0,S.jsx)(v.c,{name:e.Host,status:o,path:i,hasClipboardButton:!0,infoPopoverContent:a?(0,S.jsx)(f.p,{data:e,nodeHref:r}):null})};var y=n(48295),b=n(15132),N=n(52905),D=n(58267);const x=(0,r.cn)("tablets-statistic"),w=({tablets:e=[],database:t,nodeId:n})=>{const s=(e=>e.map((e=>({label:(0,i.bk)(e.Type),type:e.Type,count:e.Count,state:(0,D.P)(e.State)}))).sort(((e,t)=>String(e.label).localeCompare(String(t.label)))))(e);return(0,S.jsx)("div",{className:x(),children:s.map(((e,s)=>{var o;const a=(0,p.vI)(n,{database:t},"tablets"),r=`${e.label}: ${e.count}`,i=x("tablet",{state:null===(o=e.state)||void 0===o?void 0:o.toLowerCase()});return(0,S.jsx)(N.N_,{to:a,className:i,children:r},s)}))})};var I=n(41826),C=n(13342),P=n(86782),j=n(31911),E=n(73891);function A(e){return(0,E.Xo)((0,E.Jc)(e,1))}function T(e){const t=(0,E.Jc)(e,1);return(Number(t)<=0?"":"+")+(0,E.Xo)(t)}const U=(0,r.cn)("ydb-nodes-columns");function R(){return{name:P.vg.NodeId,header:"#",width:80,resizeMinWidth:80,render:({row:e})=>e.NodeId,align:s.Ay.RIGHT}}function G({getNodeRef:e,database:t},{statusForIcon:n="SystemState"}={}){return{name:P.vg.Host,header:P.uG.Host,render:({row:s})=>(0,S.jsx)(k,{node:s,getNodeRef:e,database:t,statusForIcon:n}),width:350,align:s.Ay.LEFT}}function M(){return{name:P.vg.NodeName,header:P.uG.NodeName,align:s.Ay.LEFT,render:({row:e})=>e.NodeName||i.Pd,width:200}}function L(){return{name:P.vg.DC,header:P.uG.DC,align:s.Ay.LEFT,render:({row:e})=>e.DC||i.Pd,width:60}}function z(){return{name:P.vg.Rack,header:P.uG.Rack,align:s.Ay.LEFT,render:({row:e})=>e.Rack||i.Pd,width:100}}function V(){return{name:P.vg.Version,header:P.uG.Version,width:200,align:s.Ay.LEFT,render:({row:e})=>(0,S.jsx)(c.s,{content:e.Version,children:e.Version})}}function W(){return{name:P.vg.Uptime,header:P.uG.Uptime,sortAccessor:({StartTime:e})=>e?-e:0,render:({row:e})=>(0,S.jsx)(I.p,{StartTime:e.StartTime,DisconnectTime:e.DisconnectTime}),align:s.Ay.RIGHT,width:120}}function F(){return{name:P.vg.RAM,header:P.uG.RAM,sortAccessor:({MemoryUsed:e=0})=>Number(e),defaultOrder:s.Ay.DESCENDING,render:({row:e})=>{const[t,n]=(0,u.kf)(e.MemoryUsed)&&(0,u.kf)(e.MemoryLimit)?(0,l.j9)(Number(e.MemoryUsed),Number(e.MemoryLimit),"gb",void 0,!0):[0,0];return(0,S.jsx)(c.s,{placement:["top","auto"],fullWidth:!0,content:(0,S.jsxs)(o.u,{responsive:!0,children:[(0,S.jsx)(o.u.Item,{name:(0,j.A)("field_memory-used"),children:t}),(0,S.jsx)(o.u.Item,{name:(0,j.A)("field_memory-limit"),children:n})]}),children:(0,S.jsx)(b.O,{value:e.MemoryUsed,capacity:e.MemoryLimit,formatValues:(e,t)=>(0,l.j9)(e,t,"gb",void 0,!0),className:U("column-ram"),colorizeProgress:!0,hideCapacity:!0})})},align:s.Ay.LEFT,width:80,resizeMinWidth:40}}function O(){return{name:P.vg.Memory,header:P.uG.Memory,defaultOrder:s.Ay.DESCENDING,render:({row:e})=>e.MemoryStats?(0,S.jsx)(m.S,{formatValues:l.vX,stats:e.MemoryStats}):(0,S.jsx)(b.O,{value:e.MemoryUsed,capacity:e.MemoryLimit,formatValues:l.vX,colorizeProgress:!0}),align:s.Ay.LEFT,width:300,resizeMinWidth:170}}function H(){return{name:P.vg.Pools,header:P.uG.Pools,sortAccessor:({PoolStats:e=[]})=>Math.max(...e.map((({Usage:e})=>Number(e)))),defaultOrder:s.Ay.DESCENDING,render:({row:e})=>e.PoolStats?(0,S.jsx)(y._,{pools:e.PoolStats}):i.Pd,align:s.Ay.LEFT,width:80,resizeMinWidth:60}}function _(){return{name:P.vg.CPU,header:P.uG.CPU,sortAccessor:({PoolStats:e=[]})=>Math.max(...e.map((({Usage:e})=>Number(e)))),defaultOrder:s.Ay.DESCENDING,render:({row:e})=>{if(!e.PoolStats)return i.Pd;let t=(0,u.kf)(e.CoresUsed)&&(0,u.kf)(e.CoresTotal)?e.CoresUsed/e.CoresTotal:void 0;if(void 0===t){let n=0;t=e.PoolStats.reduce(((e,t)=>(n+=Number(t.Threads),e+Number(t.Usage)*Number(t.Threads))),0),t/=n}return(0,S.jsx)(c.s,{placement:["top","auto"],fullWidth:!0,content:(0,S.jsx)(o.u,{responsive:!0,children:e.PoolStats.map((e=>(0,u.kf)(e.Usage)?(0,S.jsx)(o.u.Item,{name:e.Name,children:(0,f.Qz)("Usage",e.Usage).value},e.Name):null))}),children:(0,S.jsx)(b.O,{className:U("column-cpu"),value:t,capacity:1,colorizeProgress:!0,percents:!0})})},align:s.Ay.LEFT,width:80,resizeMinWidth:40}}function B(){return{name:P.vg.LoadAverage,header:P.uG.LoadAverage,sortAccessor:({LoadAveragePercents:e=[]})=>e[0],defaultOrder:s.Ay.DESCENDING,render:({row:e})=>(0,S.jsx)(b.O,{value:e.LoadAveragePercents&&e.LoadAveragePercents.length>0?e.LoadAveragePercents[0]:void 0,percents:!0,colorizeProgress:!0,capacity:100}),align:s.Ay.LEFT,width:170,resizeMinWidth:170}}function $(){return{name:P.vg.Load,header:P.uG.Load,sortAccessor:({LoadAveragePercents:e=[]})=>e[0],defaultOrder:s.Ay.DESCENDING,render:({row:e})=>e.LoadAveragePercents&&e.LoadAveragePercents.length>0?(0,S.jsx)(C.U,{value:e.LoadAveragePercents[0].toFixed(),theme:(0,d.f)(e.LoadAveragePercents[0])}):i.Pd,align:s.Ay.LEFT,width:80,resizeMinWidth:70}}function Y(){return{name:P.vg.DiskSpaceUsage,header:P.uG.DiskSpaceUsage,render:({row:e})=>(0,a.f8)(e.DiskSpaceUsage)?(0,S.jsx)(C.U,{value:Math.floor(e.DiskSpaceUsage),theme:(0,d.f)(e.DiskSpaceUsage)}):i.Pd,align:s.Ay.LEFT,width:115,resizeMinWidth:75}}function K(){return{name:P.vg.TotalSessions,header:P.uG.TotalSessions,render:({row:e})=>{var t;return null!==(t=e.TotalSessions)&&void 0!==t?t:i.Pd},align:s.Ay.RIGHT,width:100}}function J({database:e}){return{name:P.vg.Tablets,header:P.uG.Tablets,width:500,resizeMinWidth:500,render:({row:t})=>t.Tablets?(0,S.jsx)(w,{database:null!==e&&void 0!==e?e:t.TenantName,nodeId:t.NodeId,tablets:t.Tablets}):i.Pd,align:s.Ay.LEFT,sortable:!1}}function Q(){return{name:P.vg.Missing,header:P.uG.Missing,render:({row:e})=>e.Missing,align:s.Ay.CENTER,defaultOrder:s.Ay.DESCENDING,width:100}}function X(){return{name:P.vg.Connections,header:P.uG.Connections,render:({row:e})=>(0,u.kf)(e.Connections)?e.Connections:i.Pd,align:s.Ay.RIGHT,width:130}}function q(){return{name:P.vg.NetworkUtilization,header:P.uG.NetworkUtilization,render:({row:e})=>{const{NetworkUtilization:t,NetworkUtilizationMin:n=0,NetworkUtilizationMax:s=0}=e;return(0,u.kf)(t)?(0,S.jsx)(c.s,{placement:["top","auto"],fullWidth:!0,content:(0,S.jsxs)(o.u,{responsive:!0,children:[(0,S.jsx)(o.u.Item,{name:(0,j.A)("sum"),children:(0,l.l9)(t)},"NetworkUtilization"),(0,S.jsx)(o.u.Item,{name:(0,j.A)("min"),children:(0,l.l9)(n)},"NetworkUtilizationMin"),(0,S.jsx)(o.u.Item,{name:(0,j.A)("max"),children:(0,l.l9)(s)},"NetworkUtilizationMax")]}),children:(0,l.l9)(t)}):i.Pd},align:s.Ay.RIGHT,width:110}}function Z(){return{name:P.vg.SendThroughput,header:P.uG.SendThroughput,render:({row:e})=>(0,u.kf)(e.SendThroughput)?(0,u.O4)(e.SendThroughput):i.Pd,align:s.Ay.RIGHT,width:110}}function ee(){return{name:P.vg.ReceiveThroughput,header:P.uG.ReceiveThroughput,render:({row:e})=>(0,u.kf)(e.ReceiveThroughput)?(0,u.O4)(e.ReceiveThroughput):i.Pd,align:s.Ay.RIGHT,width:110}}function te(){return{name:P.vg.PingTime,header:P.uG.PingTime,render:({row:e})=>{const{PingTimeUs:t,PingTimeMinUs:n=0,PingTimeMaxUs:s=0}=e;return(0,u.kf)(t)?(0,S.jsx)(c.s,{placement:["top","auto"],fullWidth:!0,content:(0,S.jsxs)(o.u,{responsive:!0,children:[(0,S.jsx)(o.u.Item,{name:(0,j.A)("avg"),children:A(t)},"PingTimeUs"),(0,S.jsx)(o.u.Item,{name:(0,j.A)("min"),children:A(n)},"PingTimeMinUs"),(0,S.jsx)(o.u.Item,{name:(0,j.A)("max"),children:A(s)},"PingTimeMaxUs")]}),children:A(t)}):i.Pd},align:s.Ay.RIGHT,width:110}}function ne(){return{name:P.vg.ClockSkew,header:P.uG.ClockSkew,render:({row:e})=>{const{ClockSkewUs:t,ClockSkewMinUs:n=0,ClockSkewMaxUs:s=0}=e;return(0,u.kf)(t)?(0,S.jsx)(c.s,{placement:["top","auto"],fullWidth:!0,content:(0,S.jsxs)(o.u,{responsive:!0,children:[(0,S.jsx)(o.u.Item,{name:(0,j.A)("avg"),children:T(t)},"ClockSkewUs"),(0,S.jsx)(o.u.Item,{name:(0,j.A)("min"),children:T(n)},"ClockSkewMinUs"),(0,S.jsx)(o.u.Item,{name:(0,j.A)("max"),children:T(s)},"ClockSkewMaxUs")]}),children:T(t)}):i.Pd},align:s.Ay.RIGHT,width:110}}},81101:(e,t,n)=>{n.d(t,{$:()=>r});var s=n(59109),o=n(44508),a=n(60712);const r=e=>403===e.status?(0,a.jsx)(s.O,{position:"left"}):(0,a.jsx)(o.o,{error:e})},86782:(e,t,n)=>{n.d(t,{fN:()=>c,kU:()=>p,kn:()=>u,sp:()=>h,uG:()=>l,vg:()=>a,xd:()=>i,zO:()=>o});var s=n(31911);const o="nodesTableColumnsWidth",a={NodeId:"NodeId",Host:"Host",Database:"Database",NodeName:"NodeName",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",Memory:"Memory",RAM:"RAM",CPU:"CPU",Pools:"Pools",LoadAverage:"LoadAverage",Load:"Load",DiskSpaceUsage:"DiskSpaceUsage",TotalSessions:"TotalSessions",Connections:"Connections",NetworkUtilization:"NetworkUtilization",SendThroughput:"SendThroughput",ReceiveThroughput:"ReceiveThroughput",PingTime:"PingTime",ClockSkew:"ClockSkew",Missing:"Missing",Tablets:"Tablets",PDisks:"PDisks"},r=["Pools","Memory"];function i(e){return r.includes(e)}const l={get NodeId(){return(0,s.A)("node-id")},get Host(){return(0,s.A)("host")},get Database(){return(0,s.A)("database")},get NodeName(){return(0,s.A)("node-name")},get DC(){return(0,s.A)("dc")},get Rack(){return(0,s.A)("rack")},get Version(){return(0,s.A)("version")},get Uptime(){return(0,s.A)("uptime")},get Memory(){return(0,s.A)("memory")},get RAM(){return(0,s.A)("ram")},get Pools(){return(0,s.A)("pools")},get CPU(){return(0,s.A)("cpu")},get LoadAverage(){return(0,s.A)("load-average")},get Load(){return(0,s.A)("load")},get DiskSpaceUsage(){return(0,s.A)("disk-usage")},get TotalSessions(){return(0,s.A)("sessions")},get Connections(){return(0,s.A)("connections")},get NetworkUtilization(){return(0,s.A)("utilization")},get SendThroughput(){return(0,s.A)("send")},get ReceiveThroughput(){return(0,s.A)("receive")},get PingTime(){return(0,s.A)("ping")},get ClockSkew(){return(0,s.A)("skew")},get Missing(){return(0,s.A)("missing")},get Tablets(){return(0,s.A)("tablets")},get PDisks(){return(0,s.A)("pdisks")}},d={get NodeId(){return(0,s.A)("node-id")},get Host(){return(0,s.A)("host")},get NodeName(){return(0,s.A)("node-name")},get Database(){return(0,s.A)("database")},get DiskSpaceUsage(){return(0,s.A)("disk-usage")},get DC(){return(0,s.A)("dc")},get Rack(){return(0,s.A)("rack")},get Missing(){return(0,s.A)("missing")},get Uptime(){return(0,s.A)("uptime")},get Version(){return(0,s.A)("version")},get SystemState(){return(0,s.A)("system-state")},get ConnectStatus(){return(0,s.A)("connect-status")},get NetworkUtilization(){return(0,s.A)("network-utilization")},get ClockSkew(){return(0,s.A)("clock-skew")},get PingTime(){return(0,s.A)("ping-time")}};function u(e){return d[e]}const c={NodeId:["NodeId"],Host:["Host","Rack","Database","SystemState"],Database:["Database"],NodeName:["NodeName"],DC:["DC"],Rack:["Rack"],Version:["Version"],Uptime:["Uptime","DisconnectTime"],Memory:["Memory","MemoryDetailed"],RAM:["Memory"],Pools:["CPU"],CPU:["CPU"],LoadAverage:["LoadAverage"],Load:["LoadAverage"],DiskSpaceUsage:["DiskSpaceUsage"],TotalSessions:["SystemState"],Connections:["Connections"],NetworkUtilization:["NetworkUtilization"],SendThroughput:["SendThroughput"],ReceiveThroughput:["ReceiveThroughput"],PingTime:["PingTime"],ClockSkew:["ClockSkew"],Missing:["Missing"],Tablets:["Tablets","Database"],PDisks:["PDisks"]},m={NodeId:"NodeId",Host:"Host",Database:"Database",NodeName:"NodeName",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",Memory:"Memory",RAM:"Memory",CPU:"CPU",Pools:"CPU",LoadAverage:"LoadAverage",Load:"LoadAverage",DiskSpaceUsage:"DiskSpaceUsage",TotalSessions:void 0,Connections:"Connections",NetworkUtilization:"NetworkUtilization",SendThroughput:"SendThroughput",ReceiveThroughput:"ReceiveThroughput",PingTime:"PingTime",ClockSkew:"ClockSkew",Missing:"Missing",Tablets:void 0,PDisks:void 0};function p(e){return m[e]}function h(e){return Boolean(p(e))}},88226:(e,t,n)=>{n.d(t,{V:()=>d});n(59284);var s=n(77506),o=n(76086),a=n(7187),r=n(90182),i=n(60712);const l=(0,s.cn)("storage-disk-progress-bar");function d({diskAllocatedPercent:e=-1,severity:t,compact:n,faded:s,inactive:d,empty:u,content:c,className:m}){const[p]=(0,r.iK)(o.TJ),h={inverted:p,compact:n,faded:s,empty:u,inactive:d},g=void 0!==t&&(0,a.XY)(t);g&&(h[g.toLocaleLowerCase()]=!0);return(0,i.jsxs)("div",{className:l(h,m),role:"meter","aria-label":"Disk allocated space","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e,children:[(()=>{if(n)return(0,i.jsx)("div",{className:l("fill-bar",h),style:{width:"100%"}});const t=p?100-e:e;return e>=0?(0,i.jsx)("div",{className:l("fill-bar",h),style:{width:`${t}%`}}):null})(),c||(!n&&e>=0?(0,i.jsx)("div",{className:l("title"),children:`${Math.floor(e)}%`}):null)]})}},90053:(e,t,n)=>{n.d(t,{E:()=>h});var s=n(8873),o=n(84476),a=n(24555),r=n(21334),i=n(77506),l=n(90182),d=n(48372);const u=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),c=(0,d.g4)("ydb-diagnostics-autorefresh-control",{en:u});var m=n(60712);const p=(0,i.cn)("auto-refresh-control");function h({className:e,onManualRefresh:t}){const n=(0,l.YQ)(),[i,d]=(0,l.Nt)();return(0,m.jsxs)("div",{className:p(null,e),children:[(0,m.jsx)(o.$,{view:"flat-secondary",onClick:()=>{n(r.F.util.invalidateTags(["All"])),null===t||void 0===t||t()},extraProps:{"aria-label":c("Refresh")},children:(0,m.jsx)(o.$.Icon,{children:(0,m.jsx)(s.A,{})})}),(0,m.jsxs)(a.l,{value:[String(i)],onUpdate:e=>{d(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,m.jsx)(a.l.Option,{value:"0",children:c("None")}),(0,m.jsx)(a.l.Option,{value:"15000",children:c("15 sec")}),(0,m.jsx)(a.l.Option,{value:"60000",children:c("1 min")}),(0,m.jsx)(a.l.Option,{value:"120000",children:c("2 min")}),(0,m.jsx)(a.l.Option,{value:"300000",children:c("5 min")})]})]})}},91157:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(48372);const o=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),a=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),r=(0,s.g4)("ydb-storage-groups",{ru:a,en:o})},94025:(e,t,n)=>{n.d(t,{t:()=>s});let s=function(e){return e.Initial="Initial",e.InitialFormatRead="InitialFormatRead",e.InitialFormatReadError="InitialFormatReadError",e.InitialSysLogRead="InitialSysLogRead",e.InitialSysLogReadError="InitialSysLogReadError",e.InitialSysLogParseError="InitialSysLogParseError",e.InitialCommonLogRead="InitialCommonLogRead",e.InitialCommonLogReadError="InitialCommonLogReadError",e.InitialCommonLogParseError="InitialCommonLogParseError",e.CommonLoggerInitError="CommonLoggerInitError",e.Normal="Normal",e.OpenFileError="OpenFileError",e.ChunkQuotaError="ChunkQuotaError",e.DeviceIoError="DeviceIoError",e.Stopped="Stopped",e.Missing="Missing",e.Timeout="Timeout",e.NodeDisconnected="NodeDisconnected",e.Unknown="Unknown",e}({})},96927:(e,t,n)=>{n.d(t,{O:()=>y,f:()=>k});var s=n(59284),o=n(87184),a=n(92459),r=n(24600),i=n(54090),l=n(7435),d=n(76086),u=n(31684),c=n(90182),m=n(12888),p=n(41650),h=n(60073),g=n(25196),v=n(50672),f=n(60712);const S=[i.m.Orange,i.m.Red,i.m.Yellow],k=(e,t,n)=>{const{AvailableSize:s,TotalSize:r,State:i,PDiskId:c,NodeId:m,StringifiedId:h,Path:k,Realtime:y,Type:b,Device:N}=e,D=[{label:"PDisk",value:null!==h&&void 0!==h?h:d.Pd},{label:"State",value:i||"not available"},{label:"Type",value:b||"unknown"}];if(m&&D.push({label:"Node Id",value:m}),null!==t&&void 0!==t&&t.Host&&D.push({label:"Host",value:t.Host}),null!==t&&void 0!==t&&t.DC&&D.push({label:"DC",value:t.DC}),k&&D.push({label:"Path",value:k}),(0,p.kf)(r)&&D.push({label:"Available",value:`${(0,p.wb)(s)} of ${(0,p.wb)(r)}`}),y&&S.includes(y)&&D.push({label:"Realtime",value:y}),N&&S.includes(N)&&D.push({label:"Device",value:N}),n&&(0,l.f8)(m)&&(0,l.f8)(c)){const e=(0,u.ar)({nodeId:m,pDiskId:c}),t=(0,a.Ck)(c,m);D.push({label:"Links",value:(0,f.jsxs)(o.s,{gap:2,wrap:"wrap",children:[(0,f.jsx)(g.K,{title:(0,v.D)("pdisk-page"),url:t,external:!1}),(0,f.jsx)(g.K,{title:(0,v.D)("developer-ui"),url:e})]})})}return D},y=({data:e})=>{const t=(0,m.X)(),n=(0,c.N4)(r.K),o=(0,l.f8)(e.NodeId)?null===n||void 0===n?void 0:n.get(e.NodeId):void 0,a=s.useMemo((()=>k(e,o,t)),[e,o,t]);return(0,f.jsx)(h.z_,{title:"PDisk",info:a,size:"s"})}}}]);